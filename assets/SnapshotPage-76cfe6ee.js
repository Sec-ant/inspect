import{_ as _n}from"./ActionCard.vue_vue_type_script_setup_true_lang-e33a66c2.js";import{f as gt,c as Pe,m as de,a as Kn,b as Dn,e as Tn}from"./storage-9c627b0c.js";import{d as z,m as C,n as mt,p as D,q as L,v as X,x as T,y as et,z as V,c as I,A as Fe,B as Bt,C as tt,D as yt,E as xt,G as H,H as Pn,I as F,J as En,K as Ln,L as Ot,M as $n,O as Y,P as Ne,Q as Fn,S as Pt,T as Ut,U as In,V as ce,W as An,X as zn,Y as Bn,Z as Ee,_ as On,$ as Un,a0 as st,a1 as Mn,a2 as Vn,a3 as ct,a4 as jn,a5 as Hn,a6 as Wn,a7 as qn,a8 as ut,w as he,e as Ue,a9 as Xn,aa as Et,ab as Gn,ac as Je,a as Mt,s as ne,ad as Lt,ae as re,h as le,af as Vt,ag as jt,ah as Yn,ai as Zn,o as G,g as N,b as _,u as y,k as O,f as $e,aj as vt,F as pt,t as te,i as Jn,j as ft,ak as Qn,al as eo,am as to,l as Oe}from"./index-cc72b887.js";import{e as Me,C as no,f as oo,g as ro,h as lo,i as $t,V as ao,j as io,k as Ft,l as so,m as co,n as Le,c as It,o as At,p as uo,N as fo,a as ho}from"./task-5d8ad781.js";import{e as go,a as vo,p as po,u as bo}from"./index-0401e1bc.js";import{_ as mo}from"./_plugin-vue_export-helper-c27b6911.js";import"./file_type-a529a69e.js";function Ht(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const yo=z({name:"ChevronLeft",render(){return C("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),xo=z({name:"Switcher",render(){return C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},C("path",{d:"M12 8l10 8l-10 8z"}))}}),ko=e=>{const{fontWeight:t,textColor1:l,textColor2:r,textColorDisabled:a,dividerColor:o,fontSize:d}=e;return{titleFontSize:d,titleFontWeight:t,dividerColor:o,titleTextColor:l,titleTextColorDisabled:a,fontSize:d,textColor:r,arrowColor:r,arrowColorDisabled:a,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}},Co={name:"Collapse",common:mt,self:ko},wo=Co,No=D("collapse","width: 100%;",[D("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[L("disabled",[X("header","cursor: not-allowed;",[X("header-main",`
 color: var(--n-title-text-color-disabled);
 `),D("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),D("collapse-item","margin-left: 32px;"),T("&:first-child","margin-top: 0;"),T("&:first-child >",[X("header","padding-top: 0;")]),L("left-arrow-placement",[X("header",[D("collapse-item-arrow","margin-right: 4px;")])]),L("right-arrow-placement",[X("header",[D("collapse-item-arrow","margin-left: 4px;")])]),X("content-wrapper",[X("content-inner","padding-top: 16px;"),gt({duration:"0.15s"})]),L("active",[X("header",[L("active",[D("collapse-item-arrow","transform: rotate(90deg);")])])]),T("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),X("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[X("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),X("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),D("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),So=Object.assign(Object.assign({},Fe.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),Wt=xt("n-collapse"),Ro=z({name:"Collapse",props:So,setup(e,{slots:t}){const{mergedClsPrefixRef:l,inlineThemeDisabled:r,mergedRtlRef:a}=et(e),o=V(e.defaultExpandedNames),d=I(()=>e.expandedNames),u=Me(d,o),f=Fe("Collapse","-collapse",No,wo,e,l);function h(R){const{"onUpdate:expandedNames":w,onUpdateExpandedNames:k,onExpandedNamesChange:K}=e;k&&H(k,R),w&&H(w,R),K&&H(K,R),o.value=R}function s(R){const{onItemHeaderClick:w}=e;w&&H(w,R)}function c(R,w,k){const{accordion:K}=e,{value:A}=u;if(K)R?(h([w]),s({name:w,expanded:!0,event:k})):(h([]),s({name:w,expanded:!1,event:k}));else if(!Array.isArray(A))h([w]),s({name:w,expanded:!0,event:k});else{const E=A.slice(),M=E.findIndex(J=>w===J);~M?(E.splice(M,1),h(E),s({name:w,expanded:!1,event:k})):(E.push(w),h(E),s({name:w,expanded:!0,event:k}))}}Bt(Wt,{props:e,mergedClsPrefixRef:l,expandedNamesRef:u,slots:t,toggleItem:c});const g=tt("Collapse",a,l),p=I(()=>{const{common:{cubicBezierEaseInOut:R},self:{titleFontWeight:w,dividerColor:k,titlePadding:K,titleTextColor:A,titleTextColorDisabled:E,textColor:M,arrowColor:J,fontSize:ge,titleFontSize:oe,arrowColorDisabled:ke,itemMargin:ae}}=f.value;return{"--n-font-size":ge,"--n-bezier":R,"--n-text-color":M,"--n-divider-color":k,"--n-title-padding":K,"--n-title-font-size":oe,"--n-title-text-color":A,"--n-title-text-color-disabled":E,"--n-title-font-weight":w,"--n-arrow-color":J,"--n-arrow-color-disabled":ke,"--n-item-margin":ae}}),S=r?yt("collapse",void 0,p,e):void 0;return{rtlEnabled:g,mergedTheme:f,mergedClsPrefix:l,cssVars:r?void 0:p,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),C("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),_o=z({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(e){return{onceTrue:Pn(F(e,"show"))}},render(){return C(Ot,null,{default:()=>{const{show:e,displayDirective:t,onceTrue:l,clsPrefix:r}=this,a=t==="show"&&l,o=C("div",{class:`${r}-collapse-item__content-wrapper`},C("div",{class:`${r}-collapse-item__content-inner`},this.$slots));return a?En(o,[[Ln,e]]):e?o:null}})}}),Ko={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},Do=z({name:"CollapseItem",props:Ko,setup(e){const{mergedRtlRef:t}=et(e),l=$n(),r=Y(()=>{var c;return(c=e.name)!==null&&c!==void 0?c:l}),a=Ne(Wt);a||Fn("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:o,props:d,mergedClsPrefixRef:u,slots:f}=a,h=I(()=>{const{value:c}=o;if(Array.isArray(c)){const{value:g}=r;return!~c.findIndex(p=>p===g)}else if(c){const{value:g}=r;return g!==c}return!0});return{rtlEnabled:tt("Collapse",t,u),collapseSlots:f,randomName:l,mergedClsPrefix:u,collapsed:h,mergedDisplayDirective:I(()=>{const{displayDirective:c}=e;return c||d.displayDirective}),arrowPlacement:I(()=>d.arrowPlacement),handleClick(c){a&&!e.disabled&&a.toggleItem(h.value,r.value,c)}}},render(){const{collapseSlots:e,$slots:t,arrowPlacement:l,collapsed:r,mergedDisplayDirective:a,mergedClsPrefix:o,disabled:d}=this,u=Pt(t.header,{collapsed:r},()=>[this.title]),f=t["header-extra"]||e["header-extra"],h=t.arrow||e.arrow;return C("div",{class:[`${o}-collapse-item`,`${o}-collapse-item--${l}-arrow-placement`,d&&`${o}-collapse-item--disabled`,!r&&`${o}-collapse-item--active`]},C("div",{class:[`${o}-collapse-item__header`,!r&&`${o}-collapse-item__header--active`]},C("div",{class:`${o}-collapse-item__header-main`,onClick:this.handleClick},l==="right"&&u,C("div",{class:`${o}-collapse-item-arrow`,key:this.rtlEnabled?0:1},Pt(h,{collapsed:r},()=>{var s;return[C(Ut,{clsPrefix:o},{default:(s=e.expandIcon)!==null&&s!==void 0?s:()=>this.rtlEnabled?C(yo,null):C(no,null)})]})),l==="left"&&u),In(f,{collapsed:r},s=>C("div",{class:`${o}-collapse-item__header-extra`,onClick:this.handleClick},s))),C(_o,{clsPrefix:o,displayDirective:a,show:!r},t))}}),To={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"},Po=e=>{const{dividerColor:t,cardColor:l,modalColor:r,popoverColor:a,tableHeaderColor:o,tableColorStriped:d,textColor1:u,textColor2:f,borderRadius:h,fontWeightStrong:s,lineHeight:c,fontSizeSmall:g,fontSizeMedium:p,fontSizeLarge:S}=e;return Object.assign(Object.assign({},To),{fontSizeSmall:g,fontSizeMedium:p,fontSizeLarge:S,lineHeight:c,borderRadius:h,borderColor:ce(l,t),borderColorModal:ce(r,t),borderColorPopover:ce(a,t),tdColor:l,tdColorModal:r,tdColorPopover:a,tdColorStriped:ce(l,d),tdColorStripedModal:ce(r,d),tdColorStripedPopover:ce(a,d),thColor:ce(l,o),thColorModal:ce(r,o),thColorPopover:ce(a,o),thTextColor:u,tdTextColor:f,thFontWeight:s})},Eo={name:"Table",common:mt,self:Po},Lo=Eo,$o=e=>{const{borderRadiusSmall:t,hoverColor:l,pressedColor:r,primaryColor:a,textColor3:o,textColor2:d,textColorDisabled:u,fontSize:f}=e;return{fontSize:f,nodeBorderRadius:t,nodeColorHover:l,nodeColorPressed:r,nodeColorActive:Bn(a,{alpha:.1}),arrowColor:o,nodeTextColor:d,nodeTextColorDisabled:u,loadingColor:a,dropMarkColor:a}},Fo=An({name:"Tree",common:mt,peers:{Checkbox:oo,Scrollbar:zn,Empty:ro},self:$o}),Io=Fo,Ao=T([D("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[T("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[T("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),T("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[T("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),L("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[T("tr",[T("&:last-child",[T("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),L("single-line",[T("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),T("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),L("single-column",[T("tr",[T("&:not(:last-child)",[T("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),L("striped",[T("tr:nth-of-type(even)",[T("td","background-color: var(--n-td-color-striped)")])]),Ee("bottom-bordered",[T("tr",[T("&:last-child",[T("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),On(D("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[T("th",`
 background-color: var(--n-th-color-modal);
 `),T("td",`
 background-color: var(--n-td-color-modal);
 `)])),Un(D("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[T("th",`
 background-color: var(--n-th-color-popover);
 `),T("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),zo=Object.assign(Object.assign({},Fe.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),qt=z({name:"Table",props:zo,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:l,mergedRtlRef:r}=et(e),a=Fe("Table","-table",Ao,Lo,e,t),o=tt("Table",r,t),d=I(()=>{const{size:f}=e,{self:{borderColor:h,tdColor:s,tdColorModal:c,tdColorPopover:g,thColor:p,thColorModal:S,thColorPopover:R,thTextColor:w,tdTextColor:k,borderRadius:K,thFontWeight:A,lineHeight:E,borderColorModal:M,borderColorPopover:J,tdColorStriped:ge,tdColorStripedModal:oe,tdColorStripedPopover:ke,[st("fontSize",f)]:ae,[st("tdPadding",f)]:ve,[st("thPadding",f)]:Se},common:{cubicBezierEaseInOut:Ie}}=a.value;return{"--n-bezier":Ie,"--n-td-color":s,"--n-td-color-modal":c,"--n-td-color-popover":g,"--n-td-text-color":k,"--n-border-color":h,"--n-border-color-modal":M,"--n-border-color-popover":J,"--n-border-radius":K,"--n-font-size":ae,"--n-th-color":p,"--n-th-color-modal":S,"--n-th-color-popover":R,"--n-th-font-weight":A,"--n-th-text-color":w,"--n-line-height":E,"--n-td-padding":ve,"--n-th-padding":Se,"--n-td-color-striped":ge,"--n-td-color-striped-modal":oe,"--n-td-color-striped-popover":ke}}),u=l?yt("table",I(()=>e.size[0]),d,e):void 0;return{rtlEnabled:o,mergedClsPrefix:t,cssVars:l?void 0:d,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),C("table",{class:[`${t}-table`,this.themeClass,{[`${t}-table--rtl`]:this.rtlEnabled,[`${t}-table--bottom-bordered`]:this.bottomBordered,[`${t}-table--bordered`]:this.bordered,[`${t}-table--single-line`]:this.singleLine,[`${t}-table--single-column`]:this.singleColumn,[`${t}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),ue=z({name:"Th",render(){return C("th",null,this.$slots)}}),Qe=z({name:"Tr",render(){return C("tr",null,this.$slots)}}),fe=z({name:"Td",render(){return C("td",null,this.$slots)}}),Bo=z({name:"Thead",render(){return C("thead",null,this.$slots)}}),Xt=z({name:"Tbody",render(){return C("tbody",null,this.$slots)}}),Gt=xt("n-tree-select"),Ve=xt("n-tree"),Oo=z({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:t}=Ne(Ve,null);return()=>{const{clsPrefix:l}=e;return C("span",{"data-switcher":!0,class:[`${l}-tree-node-switcher`,e.expanded&&`${l}-tree-node-switcher--expanded`,e.hide&&`${l}-tree-node-switcher--hide`],onClick:e.onClick},C("div",{class:`${l}-tree-node-switcher__icon`},C(Mn,null,{default:()=>{if(e.loading)return C(Vn,{clsPrefix:l,key:"loading",radius:85,strokeWidth:20});const{value:r}=t;return r?r({expanded:e.expanded,selected:e.selected}):C(Ut,{clsPrefix:l,key:"switcher"},{default:()=>C(xo,null)})}})))}}}),Uo=z({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ne(Ve);function l(a){const{onCheck:o}=e;o&&o(a)}function r(a){e.indeterminate?l(!1):l(a)}return{handleUpdateValue:r,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:l,indeterminate:r,disabled:a,focusable:o,handleUpdateValue:d}=this;return C("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],"data-checkbox":!0},C(lo,{focusable:o,disabled:a,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:l,indeterminate:r,onUpdateChecked:d}))}}),Mo=z({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:l,renderSuffixRef:r,labelFieldRef:a}=Ne(Ve),o=V(null);function d(f){const{onClick:h}=e;h&&h(f)}function u(f){d(f)}return{selfRef:o,renderLabel:t,renderPrefix:l,renderSuffix:r,labelField:a,handleClick:u}},render(){const{clsPrefix:e,labelField:t,nodeProps:l,checked:r=!1,selected:a=!1,renderLabel:o,renderPrefix:d,renderSuffix:u,handleClick:f,onDragstart:h,tmNode:{rawNode:s,rawNode:{prefix:c,suffix:g,[t]:p}}}=this;return C("span",Object.assign({},l,{ref:"selfRef",class:[`${e}-tree-node-content`,l==null?void 0:l.class],onClick:f,draggable:h===void 0?void 0:!0,onDragstart:h}),d||c?C("div",{class:`${e}-tree-node-content__prefix`},d?d({option:s,selected:a,checked:r}):ct(c)):null,C("div",{class:`${e}-tree-node-content__text`},o?o({option:s,selected:a,checked:r}):ct(p)),u||g?C("div",{class:`${e}-tree-node-content__suffix`},u?u({option:s,selected:a,checked:r}):ct(g)):null)}});function zt({position:e,offsetLevel:t,indent:l,el:r}){const a={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")a.left=0,a.top=0,a.bottom=0,a.borderRadius="inherit",a.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const o=e==="before"?"top":"bottom";a[o]=0,a.left=`${r.offsetLeft+6-t*l}px`,a.height="2px",a.backgroundColor="var(--n-drop-mark-color)",a.transformOrigin=o,a.borderRadius="1px",a.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return C("div",{style:a})}function Vo({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function jo(e){return I(()=>e.leafOnly?"child":e.checkStrategy)}function xe(e,t){return!!e.rawNode[t]}function Yt(e,t,l,r){e==null||e.forEach(a=>{l(a),Yt(a[t],t,l,r),r(a)})}function Ho(e,t,l,r,a){const o=new Set,d=new Set,u=[];return Yt(e,r,f=>{if(u.push(f),a(t,f)){d.add(f[l]);for(let h=u.length-2;h>=0;--h)if(!o.has(u[h][l]))o.add(u[h][l]);else return}},()=>{u.pop()}),{expandedKeys:Array.from(o),highlightKeySet:d}}if(jn&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Wo(e,t,l,r,a){const o=new Set,d=new Set,u=new Set,f=[],h=[],s=[];function c(p){p.forEach(S=>{if(s.push(S),t(l,S)){o.add(S[r]),u.add(S[r]);for(let w=s.length-2;w>=0;--w){const k=s[w][r];if(!d.has(k))d.add(k),o.has(k)&&o.delete(k);else break}}const R=S[a];R&&c(R),s.pop()})}c(e);function g(p,S){p.forEach(R=>{const w=R[r],k=o.has(w),K=d.has(w);if(!k&&!K)return;const A=R[a];if(A)if(k)S.push(R);else{f.push(w);const E=Object.assign(Object.assign({},R),{[a]:[]});S.push(E),g(A,E[a])}else S.push(R)})}return g(e,h),{filteredTree:h,highlightKeySet:u,expandedKeys:f}}const qo=z({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ne(Ve),{droppingNodeParentRef:l,droppingMouseNodeRef:r,draggingNodeRef:a,droppingPositionRef:o,droppingOffsetLevelRef:d,nodePropsRef:u,indentRef:f,blockLineRef:h,checkboxPlacementRef:s,checkOnClickRef:c,disabledFieldRef:g}=t,p=Y(()=>!!e.tmNode.rawNode.checkboxDisabled),S=Y(()=>xe(e.tmNode,g.value)),R=Y(()=>t.disabledRef.value||S.value),w=I(()=>{const{value:b}=u;if(b)return b({option:e.tmNode.rawNode})}),k=V(null),K={value:null};Hn(()=>{K.value=k.value.$el});function A(){const{tmNode:b}=e;if(!b.isLeaf&&!b.shallowLoaded){if(!t.loadingKeysRef.value.has(b.key))t.loadingKeysRef.value.add(b.key);else return;const{onLoadRef:{value:P}}=t;P&&P(b.rawNode).then(B=>{B!==!1&&t.handleSwitcherClick(b)}).finally(()=>{t.loadingKeysRef.value.delete(b.key)})}else t.handleSwitcherClick(b)}const E=Y(()=>!S.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),M=Y(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),J=Y(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),ge=Y(()=>{const{value:b}=M;if(!b)return!1;const{value:P}=c;return typeof P=="boolean"?P:P(e.tmNode.rawNode)});function oe(b){const{value:P}=t.expandOnClickRef,{value:B}=E,{value:Re}=ge;if(!B&&!P&&!Re||$t(b,"checkbox")||$t(b,"switcher"))return;const{tmNode:je}=e;B&&t.handleSelect(je),P&&!je.isLeaf&&A(),Re&&ve(!J.value)}function ke(b){var P,B;h.value||(R.value||oe(b),(B=(P=w.value)===null||P===void 0?void 0:P.onClick)===null||B===void 0||B.call(P,b))}function ae(b){var P,B;h.value&&(R.value||oe(b),(B=(P=w.value)===null||P===void 0?void 0:P.onClick)===null||B===void 0||B.call(P,b))}function ve(b){t.handleCheck(e.tmNode,b)}function Se(b){t.handleDragStart({event:b,node:e.tmNode})}function Ie(b){b.currentTarget===b.target&&t.handleDragEnter({event:b,node:e.tmNode})}function ee(b){b.preventDefault(),t.handleDragOver({event:b,node:e.tmNode})}function pe(b){t.handleDragEnd({event:b,node:e.tmNode})}function be(b){b.currentTarget===b.target&&t.handleDragLeave({event:b,node:e.tmNode})}function nt(b){b.preventDefault(),o.value!==null&&t.handleDrop({event:b,node:e.tmNode,dropPosition:o.value})}return{showDropMark:Y(()=>{const{value:b}=a;if(!b)return;const{value:P}=o;if(!P)return;const{value:B}=r;if(!B)return;const{tmNode:Re}=e;return Re.key===B.key}),showDropMarkAsParent:Y(()=>{const{value:b}=l;if(!b)return!1;const{tmNode:P}=e,{value:B}=o;return B==="before"||B==="after"?b.key===P.key:!1}),pending:Y(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:Y(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:Y(()=>{var b;return(b=t.highlightKeySetRef.value)===null||b===void 0?void 0:b.has(e.tmNode.key)}),checked:J,indeterminate:Y(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:Y(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:Y(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:R,checkable:M,mergedCheckOnClick:ge,checkboxDisabled:p,selectable:E,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:h,nodeProps:w,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:o,droppingOffsetLevel:d,indent:f,checkboxPlacement:s,contentInstRef:k,contentElRef:K,handleCheck:ve,handleDrop:nt,handleDragStart:Se,handleDragEnter:Ie,handleDragOver:ee,handleDragEnd:pe,handleDragLeave:be,handleLineClick:ae,handleContentClick:ke,handleSwitcherClick:A}},render(){const{tmNode:e,clsPrefix:t,checkable:l,expandOnClick:r,selectable:a,selected:o,checked:d,highlight:u,draggable:f,blockLine:h,indent:s,disabled:c,pending:g,internalScrollable:p,nodeProps:S,checkboxPlacement:R}=this,w=f&&!c?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,k=p?Ht(e.key):void 0,K=R==="right",A=l?C(Uo,{right:K,focusable:this.checkboxFocusable,disabled:c||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return C("div",Object.assign({class:`${t}-tree-node-wrapper`},w),C("div",Object.assign({},h?S:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:o,[`${t}-tree-node--checkable`]:l,[`${t}-tree-node--highlight`]:u,[`${t}-tree-node--pending`]:g,[`${t}-tree-node--disabled`]:c,[`${t}-tree-node--selectable`]:a,[`${t}-tree-node--clickable`]:a||r||this.mergedCheckOnClick},S==null?void 0:S.class],"data-key":k,draggable:f&&h,onClick:this.handleLineClick,onDragstart:f&&h&&!c?this.handleDragStart:void 0}),Wn(e.level,C("div",{class:`${t}-tree-node-indent`},C("div",{style:{width:`${s}px`}}))),C(Oo,{clsPrefix:t,expanded:this.expanded,selected:o,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),K?null:A,C(Mo,{ref:"contentInstRef",clsPrefix:t,checked:d,selected:o,onClick:this.handleContentClick,nodeProps:h?void 0:S,onDragstart:f&&!h&&!c?this.handleDragStart:void 0,tmNode:e}),f?this.showDropMark?zt({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:s}):this.showDropMarkAsParent?zt({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:s}):null:null,K?A:null))}}),Zt=qo;function Xo({props:e,fNodesRef:t,mergedExpandedKeysRef:l,mergedSelectedKeysRef:r,handleSelect:a,handleSwitcherClick:o}){const{value:d}=r,u=Ne(Gt,null),f=u?u.pendingNodeKeyRef:V(d.length?d[d.length-1]:null);function h(s){if(!e.keyboard)return;const{value:c}=f;if(c===null){if((s.key==="ArrowDown"||s.key==="ArrowUp")&&s.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(s.key)&&c===null){const{value:g}=t;let p=0;for(;p<g.length;){if(!g[p].disabled){f.value=g[p].key;break}p+=1}}}else{const{value:g}=t;let p=g.findIndex(S=>S.key===c);if(!~p)return;if(s.key==="Enter")a(g[p]);else if(s.key==="ArrowDown")for(s.preventDefault(),p+=1;p<g.length;){if(!g[p].disabled){f.value=g[p].key;break}p+=1}else if(s.key==="ArrowUp")for(s.preventDefault(),p-=1;p>=0;){if(!g[p].disabled){f.value=g[p].key;break}p-=1}else if(s.key==="ArrowLeft"){const S=g[p];if(S.isLeaf||!l.value.includes(c)){const R=S.getParent();R&&(f.value=R.key)}else o(S)}else if(s.key==="ArrowRight"){const S=g[p];if(S.isLeaf)return;if(!l.value.includes(c))o(S);else for(p+=1;p<g.length;){if(!g[p].disabled){f.value=g[p].key;break}p+=1}}}}return{pendingNodeKeyRef:f,handleKeydown:h}}const Go=z({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return C(Ot,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>C("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:qn(this.height)}},this.nodes.map(t=>C(Zt,{clsPrefix:e,tmNode:t})))})}}),Yo=D("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[T("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),T(">",[D("tree-node",[T("&:first-child",{marginTop:0})])]),D("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 height: 0;
 `),D("tree-motion-wrapper",[L("expand",[gt({duration:"0.2s"})]),L("collapse",[gt({duration:"0.2s",reverse:!0})])]),D("tree-node-wrapper",`
 box-sizing: border-box;
 padding: 3px 0;
 `),D("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[L("highlight",[D("tree-node-content",[X("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),L("disabled",[D("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),Ee("disabled",[L("clickable",[D("tree-node-content",`
 cursor: pointer;
 `)])])]),L("block-node",[D("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),Ee("block-line",[D("tree-node",[Ee("disabled",[D("tree-node-content",[T("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),L("selectable",[D("tree-node-content",[T("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),L("pending",[D("tree-node-content",`
 background-color: var(--n-node-color-hover);
 `)]),L("selected",[D("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),L("block-line",[D("tree-node",[Ee("disabled",[T("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),L("pending",`
 background-color: var(--n-node-color-hover);
 `),L("selectable",[Ee("selected",[T("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),L("selected",{backgroundColor:"var(--n-node-color-active)"})]),L("disabled",`
 cursor: not-allowed;
 `)])]),D("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[X("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[D("icon",[ut()]),D("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[ut()]),D("base-icon",[ut()])]),L("hide",{visibility:"hidden"}),L("expanded",{transform:"rotate(90deg)"})]),D("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `,[L("right","margin-left: 4px;")]),L("checkable",[D("tree-node-content",`
 padding: 0 6px;
 `)]),D("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[T("&:last-child",{marginBottom:0}),X("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),X("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),X("suffix",`
 display: inline-flex;
 `)]),X("empty","margin: auto;")]);var Zo=globalThis&&globalThis.__awaiter||function(e,t,l,r){function a(o){return o instanceof l?o:new l(function(d){d(o)})}return new(l||(l=Promise))(function(o,d){function u(s){try{h(r.next(s))}catch(c){d(c)}}function f(s){try{h(r.throw(s))}catch(c){d(c)}}function h(s){s.done?o(s.value):a(s.value).then(u,f)}h((r=r.apply(e,t||[])).next())})};const Ze=30;function Jo(e,t,l,r){return{getIsGroup(){return!1},getKey(o){return o[e]},getChildren:r||(o=>o[t]),getDisabled(o){return!!(o[l]||o.checkboxDisabled)}}}const Qo={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},er=Object.assign(Object.assign(Object.assign(Object.assign({},Fe.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:Vo},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Qo),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),tr=z({name:"Tree",props:er,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:l,mergedRtlRef:r}=et(e),a=tt("Tree",r,t),o=Fe("Tree","-tree",Yo,Io,e,t),d=V(null),u=V(null),f=V(null);function h(){var n;return(n=f.value)===null||n===void 0?void 0:n.listElRef}function s(){var n;return(n=f.value)===null||n===void 0?void 0:n.itemsElRef}const c=I(()=>{const{filter:n}=e;if(n)return n;const{labelField:i}=e;return(v,m)=>{if(!v.length)return!0;const x=m[i];return typeof x=="string"?x.toLowerCase().includes(v.toLowerCase()):!1}}),g=I(()=>{const{pattern:n}=e;return n?!n.length||!c.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Wo(e.data,c.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),p=I(()=>io(e.showIrrelevantNodes?e.data:g.value.filteredTree,Jo(e.keyField,e.childrenField,e.disabledField,e.getChildren))),S=Ne(Gt,null),R=e.internalTreeSelect?S.dataTreeMate:p,{watchProps:w}=e,k=V([]);w!=null&&w.includes("defaultCheckedKeys")?he(()=>{k.value=e.defaultCheckedKeys}):k.value=e.defaultCheckedKeys;const K=F(e,"checkedKeys"),A=Me(K,k),E=I(()=>R.value.getCheckedKeys(A.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),M=jo(e),J=I(()=>E.value.checkedKeys),ge=I(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:E.value.indeterminateKeys}),oe=V([]);w!=null&&w.includes("defaultSelectedKeys")?he(()=>{oe.value=e.defaultSelectedKeys}):oe.value=e.defaultSelectedKeys;const ke=F(e,"selectedKeys"),ae=Me(ke,oe),ve=V([]),Se=n=>{ve.value=e.defaultExpandAll?R.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};w!=null&&w.includes("defaultExpandedKeys")?he(()=>{Se(void 0)}):he(()=>{Se(e.defaultExpandedKeys)});const Ie=F(e,"expandedKeys"),ee=Me(Ie,ve),pe=I(()=>p.value.getFlattenedNodes(ee.value)),{pendingNodeKeyRef:be,handleKeydown:nt}=Xo({props:e,mergedSelectedKeysRef:ae,fNodesRef:pe,mergedExpandedKeysRef:ee,handleSelect:at,handleSwitcherClick:St});let b=null,P=null;const B=V(new Set),Re=I(()=>e.internalHighlightKeySet||g.value.highlightKeySet),je=Me(Re,B),He=V(new Set),Qt=I(()=>ee.value.filter(n=>!He.value.has(n)));let kt=0;const Ae=V(null),We=V(null),qe=V(null),Xe=V(null),Ge=V(0),en=I(()=>{const{value:n}=We;return n?n.parent:null});Ue(F(e,"data"),()=>{He.value.clear(),be.value=null,Be()},{deep:!1});let ot=!1;const rt=()=>{ot=!0,Je(()=>{ot=!1})};let ze;Ue(F(e,"pattern"),(n,i)=>{if(e.showIrrelevantNodes)if(ze=void 0,n){const{expandedKeys:v,highlightKeySet:m}=Ho(e.data,e.pattern,e.keyField,e.childrenField,c.value);B.value=m,rt(),Ke(v,Q(v),{node:null,action:"filter"})}else B.value=new Set;else if(!n.length)ze!==void 0&&(rt(),Ke(ze,Q(ze),{node:null,action:"filter"}));else{i.length||(ze=ee.value);const{expandedKeys:v}=g.value;v!==void 0&&(rt(),Ke(v,Q(v),{node:null,action:"filter"}))}});function Ct(n){return Zo(this,void 0,void 0,function*(){const{onLoad:i}=e;if(!i){yield Promise.resolve();return}const{value:v}=He;if(!v.has(n.key)){v.add(n.key);try{(yield i(n.rawNode))===!1&&De()}catch(m){console.error(m),De()}v.delete(n.key)}})}he(()=>{var n;const{value:i}=p;if(!i)return;const{getNode:v}=i;(n=ee.value)===null||n===void 0||n.forEach(m=>{const x=v(m);x&&!x.shallowLoaded&&Ct(x)})});const _e=V(!1),me=V([]);Ue(Qt,(n,i)=>{if(!e.animated||ot){Je(Ye);return}const v=new Set(i);let m=null,x=null;for(const U of n)if(!v.has(U)){if(m!==null)return;m=U}const W=new Set(n);for(const U of i)if(!W.has(U)){if(x!==null)return;x=U}if(m===null&&x===null)return;const{virtualScroll:j}=e,se=(j?f.value.listElRef:d.value).offsetHeight,we=Math.ceil(se/Ze)+1;let ie;if(m!==null&&(ie=i),x!==null&&(ie===void 0?ie=n:ie=ie.filter(U=>U!==x)),_e.value=!0,me.value=p.value.getFlattenedNodes(ie),m!==null){const U=me.value.findIndex(q=>q.key===m);if(~U){const q=me.value[U].children;if(q){const ye=Ft(q,n);me.value.splice(U+1,0,{__motion:!0,mode:"expand",height:j?ye.length*Ze:void 0,nodes:j?ye.slice(0,we):ye})}}}if(x!==null){const U=me.value.findIndex(q=>q.key===x);if(~U){const q=me.value[U].children;if(!q)return;_e.value=!0;const ye=Ft(q,n);me.value.splice(U+1,0,{__motion:!0,mode:"collapse",height:j?ye.length*Ze:void 0,nodes:j?ye.slice(0,we):ye})}}});const tn=I(()=>so(pe.value)),nn=I(()=>_e.value?me.value:pe.value);function Ye(){const{value:n}=u;n&&n.sync()}function on(){_e.value=!1,e.virtualScroll&&Je(Ye)}function Q(n){const{getNode:i}=R.value;return n.map(v=>{var m;return((m=i(v))===null||m===void 0?void 0:m.rawNode)||null})}function Ke(n,i,v){const{"onUpdate:expandedKeys":m,onUpdateExpandedKeys:x}=e;ve.value=n,m&&H(m,n,i,v),x&&H(x,n,i,v)}function wt(n,i,v){const{"onUpdate:checkedKeys":m,onUpdateCheckedKeys:x}=e;k.value=n,x&&H(x,n,i,v),m&&H(m,n,i,v)}function rn(n,i){const{"onUpdate:indeterminateKeys":v,onUpdateIndeterminateKeys:m}=e;v&&H(v,n,i),m&&H(m,n,i)}function lt(n,i,v){const{"onUpdate:selectedKeys":m,onUpdateSelectedKeys:x}=e;oe.value=n,x&&H(x,n,i,v),m&&H(m,n,i,v)}function ln(n){const{onDragenter:i}=e;i&&H(i,n)}function an(n){const{onDragleave:i}=e;i&&H(i,n)}function dn(n){const{onDragend:i}=e;i&&H(i,n)}function sn(n){const{onDragstart:i}=e;i&&H(i,n)}function cn(n){const{onDragover:i}=e;i&&H(i,n)}function un(n){const{onDrop:i}=e;i&&H(i,n)}function Be(){fn(),Ce()}function fn(){Ae.value=null}function Ce(){Ge.value=0,We.value=null,qe.value=null,Xe.value=null,De()}function De(){b&&(window.clearTimeout(b),b=null),P=null}function Nt(n,i){if(e.disabled||xe(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){at(n);return}const v=i?"check":"uncheck",{checkedKeys:m,indeterminateKeys:x}=R.value[v](n.key,J.value,{cascade:e.cascade,checkStrategy:M.value,allowNotLoaded:e.allowCheckingNotLoaded});wt(m,Q(m),{node:n.rawNode,action:v}),rn(x,Q(x))}function hn(n){if(e.disabled)return;const{key:i}=n,{value:v}=ee,m=v.findIndex(x=>x===i);if(~m){const x=Array.from(v);x.splice(m,1),Ke(x,Q(x),{node:n.rawNode,action:"collapse"})}else{const x=p.value.getNode(i);if(!x||x.isLeaf)return;let W;if(e.accordion){const j=new Set(n.siblings.map(({key:se})=>se));W=v.filter(se=>!j.has(se)),W.push(i)}else W=v.concat(i);Ke(W,Q(W),{node:n.rawNode,action:"expand"})}}function St(n){e.disabled||_e.value||hn(n)}function at(n){if(!(e.disabled||!e.selectable)){if(be.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:i,indeterminateKeys:v}}=E;e.multiple?Nt(n,!(i.includes(n.key)||v.includes(n.key))):wt([n.key],Q([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const i=Array.from(ae.value),v=i.findIndex(m=>m===n.key);~v?e.cancelable&&i.splice(v,1):~v||i.push(n.key),lt(i,Q(i),{node:n.rawNode,action:~v?"unselect":"select"})}else ae.value.includes(n.key)?e.cancelable&&lt([],[],{node:n.rawNode,action:"unselect"}):lt([n.key],Q([n.key]),{node:n.rawNode,action:"select"})}}function gn(n){if(b&&(window.clearTimeout(b),b=null),n.isLeaf)return;P=n.key;const i=()=>{if(P!==n.key)return;const{value:v}=qe;if(v&&v.key===n.key&&!ee.value.includes(n.key)){const m=ee.value.concat(n.key);Ke(m,Q(m),{node:n.rawNode,action:"expand"})}b=null,P=null};n.shallowLoaded?b=window.setTimeout(()=>{i()},1e3):b=window.setTimeout(()=>{Ct(n).then(()=>{i()})},1e3)}function vn({event:n,node:i}){!e.draggable||e.disabled||xe(i,e.disabledField)||(Rt({event:n,node:i},!1),ln({event:n,node:i.rawNode}))}function pn({event:n,node:i}){!e.draggable||e.disabled||xe(i,e.disabledField)||an({event:n,node:i.rawNode})}function bn(n){n.target===n.currentTarget&&Ce()}function mn({event:n,node:i}){Be(),!(!e.draggable||e.disabled||xe(i,e.disabledField))&&dn({event:n,node:i.rawNode})}function yn({event:n,node:i}){!e.draggable||e.disabled||xe(i,e.disabledField)||(kt=n.clientX,Ae.value=i,sn({event:n,node:i.rawNode}))}function Rt({event:n,node:i},v=!0){var m;if(!e.draggable||e.disabled||xe(i,e.disabledField))return;const{value:x}=Ae;if(!x)return;const{allowDrop:W,indent:j}=e;v&&cn({event:n,node:i.rawNode});const se=n.currentTarget,{height:we,top:ie}=se.getBoundingClientRect(),U=n.clientY-ie;let q;W({node:i.rawNode,dropPosition:"inside",phase:"drag"})?U<=8?q="before":U>=we-8?q="after":q="inside":U<=we/2?q="before":q="after";const{value:Rn}=tn;let $,Z;const it=Rn(i.key);if(it===null){Ce();return}let Kt=!1;q==="inside"?($=i,Z="inside"):q==="before"?i.isFirstChild?($=i,Z="before"):($=pe.value[it-1],Z="after"):($=i,Z="after"),!$.isLeaf&&ee.value.includes($.key)&&(Kt=!0,Z==="after"&&($=pe.value[it+1],$?Z="before":($=i,Z="inside")));const Dt=$;if(qe.value=Dt,!Kt&&x.isLastChild&&x.key===$.key&&(Z="after"),Z==="after"){let Tt=kt-n.clientX,dt=0;for(;Tt>=j/2&&$.parent!==null&&$.isLastChild&&dt<1;)Tt-=j,dt+=1,$=$.parent;Ge.value=dt}else Ge.value=0;if((x.contains($)||Z==="inside"&&((m=x.parent)===null||m===void 0?void 0:m.key)===$.key)&&!(x.key===Dt.key&&x.key===$.key)){Ce();return}if(!W({node:$.rawNode,dropPosition:Z,phase:"drag"})){Ce();return}if(x.key===$.key)De();else if(P!==$.key)if(Z==="inside"){if(e.expandOnDragenter){if(gn($),!$.shallowLoaded&&P!==$.key){Be();return}}else if(!$.shallowLoaded){Be();return}}else De();else Z!=="inside"&&De();Xe.value=Z,We.value=$}function xn({event:n,node:i,dropPosition:v}){if(!e.draggable||e.disabled||xe(i,e.disabledField))return;const{value:m}=Ae,{value:x}=We,{value:W}=Xe;if(!(!m||!x||!W)&&e.allowDrop({node:x.rawNode,dropPosition:W,phase:"drag"})&&m.key!==x.key){if(W==="before"){const j=m.getNext({includeDisabled:!0});if(j&&j.key===x.key){Ce();return}}if(W==="after"){const j=m.getPrev({includeDisabled:!0});if(j&&j.key===x.key){Ce();return}}un({event:n,node:x.rawNode,dragNode:m.rawNode,dropPosition:v}),Be()}}function kn(){Ye()}function Cn(){Ye()}function wn(n){var i;if(e.virtualScroll||e.internalScrollable){const{value:v}=u;if(!((i=v==null?void 0:v.containerRef)===null||i===void 0)&&i.contains(n.relatedTarget))return;be.value=null}else{const{value:v}=d;if(v!=null&&v.contains(n.relatedTarget))return;be.value=null}}Ue(be,n=>{var i,v;if(n!==null){if(e.virtualScroll)(i=f.value)===null||i===void 0||i.scrollTo({key:n});else if(e.internalScrollable){const{value:m}=u;if(m===null)return;const x=(v=m.contentRef)===null||v===void 0?void 0:v.querySelector(`[data-key="${Ht(n)}"]`);if(!x)return;m.scrollTo({el:x})}}}),Bt(Ve,{loadingKeysRef:He,highlightKeySetRef:je,displayedCheckedKeysRef:J,displayedIndeterminateKeysRef:ge,mergedSelectedKeysRef:ae,mergedExpandedKeysRef:ee,mergedThemeRef:o,mergedCheckStrategyRef:M,nodePropsRef:F(e,"nodeProps"),disabledRef:F(e,"disabled"),checkableRef:F(e,"checkable"),selectableRef:F(e,"selectable"),expandOnClickRef:F(e,"expandOnClick"),onLoadRef:F(e,"onLoad"),draggableRef:F(e,"draggable"),blockLineRef:F(e,"blockLine"),indentRef:F(e,"indent"),cascadeRef:F(e,"cascade"),checkOnClickRef:F(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:qe,droppingNodeParentRef:en,draggingNodeRef:Ae,droppingPositionRef:Xe,droppingOffsetLevelRef:Ge,fNodesRef:pe,pendingNodeKeyRef:be,disabledFieldRef:F(e,"disabledField"),internalScrollableRef:F(e,"internalScrollable"),internalCheckboxFocusableRef:F(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:F(e,"renderLabel"),renderPrefixRef:F(e,"renderPrefix"),renderSuffixRef:F(e,"renderSuffix"),renderSwitcherIconRef:F(e,"renderSwitcherIcon"),labelFieldRef:F(e,"labelField"),multipleRef:F(e,"multiple"),handleSwitcherClick:St,handleDragEnd:mn,handleDragEnter:vn,handleDragLeave:pn,handleDragStart:yn,handleDrop:xn,handleDragOver:Rt,handleSelect:at,handleCheck:Nt});function Nn(n){var i;(i=f.value)===null||i===void 0||i.scrollTo(n)}const Sn={handleKeydown:nt,scrollTo:Nn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=E.value;return{keys:n,options:Q(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=E.value;return{keys:n,options:Q(n)}}},_t=I(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:i,nodeBorderRadius:v,nodeColorHover:m,nodeColorPressed:x,nodeColorActive:W,arrowColor:j,loadingColor:se,nodeTextColor:we,nodeTextColorDisabled:ie,dropMarkColor:U}}=o.value;return{"--n-arrow-color":j,"--n-loading-color":se,"--n-bezier":n,"--n-font-size":i,"--n-node-border-radius":v,"--n-node-color-active":W,"--n-node-color-hover":m,"--n-node-color-pressed":x,"--n-node-text-color":we,"--n-node-text-color-disabled":ie,"--n-drop-mark-color":U}}),Te=l?yt("tree",void 0,_t,e):void 0;return Object.assign(Object.assign({},Sn),{mergedClsPrefix:t,mergedTheme:o,rtlEnabled:a,fNodes:nn,aip:_e,selfElRef:d,virtualListInstRef:f,scrollbarInstRef:u,handleFocusout:wn,handleDragLeaveTree:bn,handleScroll:kn,getScrollContainer:h,getScrollContent:s,handleAfterEnter:on,handleResize:Cn,cssVars:l?void 0:_t,themeClass:Te==null?void 0:Te.themeClass,onRender:Te==null?void 0:Te.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:l}=this;if(!t.length&&l)return l();const{mergedClsPrefix:r,blockNode:a,blockLine:o,draggable:d,disabled:u,internalFocusable:f,checkable:h,handleKeydown:s,rtlEnabled:c,handleFocusout:g}=this,p=f&&!u,S=p?"0":void 0,R=[`${r}-tree`,c&&`${r}-tree--rtl`,h&&`${r}-tree--checkable`,(o||a)&&`${r}-tree--block-node`,o&&`${r}-tree--block-line`],w=K=>"__motion"in K?C(Go,{height:K.height,nodes:K.nodes,clsPrefix:r,mode:K.mode,onAfterEnter:this.handleAfterEnter}):C(Zt,{key:K.key,tmNode:K,clsPrefix:r});if(this.virtualScroll){const{mergedTheme:K,internalScrollablePadding:A}=this,E=Xn(A||"0");return C(Et,{ref:"scrollbarInstRef",onDragleave:d?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:R,theme:K.peers.Scrollbar,themeOverrides:K.peerOverrides.Scrollbar,tabindex:S,onKeydown:p?s:void 0,onFocusout:p?g:void 0},{default:()=>{var M;return(M=this.onRender)===null||M===void 0||M.call(this),C(ao,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Ze,ignoreItemResize:this.aip,paddingTop:E.top,paddingBottom:E.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:E.left,paddingRight:E.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:J})=>w(J)})}})}const{internalScrollable:k}=this;return R.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),k?C(Et,{class:R,tabindex:S,onKeydown:p?s:void 0,onFocusout:p?g:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>C("div",{onDragleave:d?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(w))}):C("div",{class:R,tabindex:S,ref:"selfElRef",style:this.cssVars,onKeydown:p?s:void 0,onFocusout:p?g:void 0,onDragleave:d?this.handleDragLeaveTree:void 0},t.length?t.map(w):Gn(this.$slots.empty,()=>[C(co,{class:`${r}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),Jt=z({__name:"DraggableCard",props:{initialValue:{default:()=>({})}},setup(e){const t=e,l=t.initialValue.left!==void 0,r=t.initialValue.top!==void 0,a={x:(l?t.initialValue.left:t.initialValue.right)??0,y:(r?t.initialValue.top:t.initialValue.bottom)??0},o=Mt({...a}),d=I(()=>{const k=l?`left:${o.x}px;`:`right:${o.x}px;`,K=r?`top:${o.y}px;`:`bottom:${o.y}px;`;return k+K});let u;const f=k=>{u=k,a.x=o.x,a.y=o.y},h=k=>{if(!g.value||!u)return;const K=k.clientX-u.clientX,A=k.clientY-u.clientY;o.x=a.x+(l?K:-K),o.y=a.y+(r?A:-A)},s=()=>{u=void 0},c=ne(),g=ne(),p=k=>{u&&k.preventDefault()},S=["transition-top,bottom,left,right-500"],R=()=>{if(!g.value)return;const{top:k,bottom:K,left:A,right:E}=g.value.getBoundingClientRect();if(E<0||A>window.innerWidth||K<0||k>window.innerHeight){o.x=a.x,o.y=a.y,s();const M=c.value;M&&(M.classList.add(...S),setTimeout(()=>{M.classList.remove(...S)},550))}};window.addEventListener("pointermove",h),window.addEventListener("pointerup",R),document.addEventListener("selectstart",p),Lt(()=>{window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",R),document.removeEventListener("selectstart",p),s()}),Ue(g,(k,K)=>{k&&(k.addEventListener("pointerdown",f),k.addEventListener("pointerup",s)),K&&(K.removeEventListener("pointerdown",f),K.removeEventListener("pointerup",s))}),Lt(()=>{g.value&&(g.value.removeEventListener("pointerdown",f),g.value.removeEventListener("pointerup",s))});const w=k=>{k instanceof HTMLElement?g.value=k:g.value=void 0};return(k,K)=>(G(),re(Zn,{to:"body"},[le("div",{fixed:"",ref_key:"box",ref:c,style:jt([k.$attrs.style,d.value]),class:Yn(k.$attrs.class)},[Vt(k.$slots,"default",{onRef:w})],6)]))}});const nr=["onClick"],or=z({__name:"AttrCard",props:{focusNode:{}},setup(e){const t=e,l=I(()=>Object.entries(t.focusNode.attr).map(([r,a])=>(a=JSON.stringify(a),{name:r,value:a})));return(r,a)=>(G(),re(Jt,{initialValue:{top:90,right:10}},{default:N(({onRef:o})=>[_(y(qt),{size:"small",striped:"",singleLine:!1,class:"gkd_code"},{default:N(()=>[le("thead",{"cursor-move":"",ref:o},[_(y(Qe),null,{default:N(()=>[_(y(ue),null,{default:N(()=>[O(" Name ")]),_:1}),_(y(ue),null,{default:N(()=>[O(" Value ")]),_:1})]),_:1})],512),_(y(Xt),null,{default:N(()=>[(G(!0),$e(pt,null,vt(l.value,d=>(G(),re(y(Qe),{key:d.name},{default:N(()=>[_(y(fe),null,{default:N(()=>[le("span",{onClick:u=>y(Pe)(`${d.name}=${d.value}`)},te(d.name),9,nr)]),_:2},1024),_(y(fe),null,{default:N(()=>[_(y(Le),{style:{width:"250px"}},{default:N(()=>[O(te(d.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:2},1024)]),_:1}))}}),rr=e=>(e.forEach(t=>{var l,r,a,o,d,u;t.attr??(t.attr={name:"NULL"}),t.children??(t.children=[]),t.parent=e[t.pid],t.parent&&((l=t.attr).index??(l.index=t.parent.children.length),(r=t.parent)==null||r.children.push(t)),Object.defineProperty(t,"isLeaf",{get(){return t.children.length==0}}),t.attr.depth=(((o=(a=t.parent)==null?void 0:a.attr)==null?void 0:o.depth)??-1)+1,(d=t.attr)._id??(d._id=t.id),(u=t.attr)._pid??(u._pid=t.pid)}),e[0]),lr=(e,t,l)=>{const r=e.attr;return r.left<=t&&t<=r.right&&r.top<=l&&l<=r.bottom},ar=(e,t)=>e.attr.left<=t.attr.left&&e.attr.top<=t.attr.top&&e.attr.right>=t.attr.right&&e.attr.bottom>=t.attr.bottom,ir=(e,t,l)=>{let r;return e.forEach(a=>{var o;if(((o=a==null?void 0:a.attr)==null?void 0:o.left)!==void 0&&lr(a,t,l)){if(!r){r=a;return}ar(r,a)&&(r=a)}}),r},dr=async e=>new Promise((t,l)=>{const r=new Image;r.onload=()=>{t({height:r.naturalHeight,width:r.naturalWidth})},r.onerror=l,r.src=e}),ht=Symbol("labelKey"),bt=e=>{var l,r;if(Reflect.has(e,ht))return Reflect.get(e,ht);let t=((r=(l=e.attr.name)==null?void 0:l.split("."))==null?void 0:r.at(-1))??"";return e.attr.text?t=`${t} : ${e.attr.text}`:e.attr.desc&&(t=`${t} : ${e.attr.desc}`),Reflect.set(e,ht,t),t},sr={flex:"","flex-col":"",relative:"","h-full":""},cr=["src"],ur=z({__name:"ScreenshotCard",props:{url:{},snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,l=ne();he(async()=>{l.value=await dr(t.url)});const r=ne();he(()=>{if(!t.rootNode)return;const o=r.value,d=o==null?void 0:o.target;if(!o||!d||!(d instanceof HTMLImageElement))return;const u=d.getBoundingClientRect(),f=(o.clientX-u.left)/d.offsetWidth*d.naturalWidth,h=(o.clientY-u.top)/d.offsetHeight*d.naturalHeight,s=ir(t.snapshot.nodes,f,h);s&&t.onUpdateFocusNode(s)});const a=I(()=>{const o=l.value;if(!o||!t.focusNode)return"";const d=t.focusNode.attr;return{left:`calc(${100*d.left/o.width+"%"} - 1px)`,top:`calc(${100*d.top/o.height+"%"} - 1px)`,width:100*(d.right-d.left)/o.width+"%",height:100*(d.bottom-d.top)/o.height+"%"}});return(o,d)=>(G(),$e("div",sr,[le("img",{src:o.url,onClick:d[0]||(d[0]=u=>r.value=u),"h-full":"","cursor-crosshair":""},null,8,cr),le("div",{style:jt(a.value),absolute:"","pointer-events-none":"","transition-all-300":"","b-1px":"","b-red":"","b-solid":""},null,4)]))}}),fr={"w-500px":"","bg-white":"","b-1px":"","b-solid":"","b-gray-200":"","rounded-4px":"","p-8px":""},hr={flex:"","m-b-4px":""},gr=le("div",{"p-5px":""},null,-1),vr={"break-all":""},pr=le("div",{"p-l-8px":""},null,-1),br=z({__name:"SearchCard",props:{rootNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,l=ne(""),r=Mt([]),a=go(()=>{if(!t.rootNode){de.error("根节点不存在");return}const d=l.value.trim();if(d)if(o.value){if(r.find(h=>typeof h.selector=="object"&&h.selector.toString()==d)){de.warning("不可重复选择");return}const u=vo(()=>po(d),"选择器非法"),f=u.querySelectorAll(t.rootNode);if(f.length==0){de.success("没有选择到节点");return}de.success(`选择到 ${f.length} 个节点`),r.unshift({selector:u,results:f})}else{if(r.find(h=>typeof h.selector=="string"&&h.selector.toString()==d)){de.warning("不可重复选择");return}const u=[],f=[t.rootNode];for(;f.length>0;){const h=f.pop();bt(h).includes(d)&&u.push(h),f.push(...[...h.children].reverse())}if(u.length==0){de.success("没有搜索到节点");return}de.success(`搜索到 ${u.length} 个节点`),r.unshift({selector:d,results:u})}}),o=ne(!1);return(d,u)=>(G(),re(Jt,{initialValue:{top:90,right:380},class:"z-1"},{default:N(({onRef:f})=>[le("div",fr,[le("div",hr,[_(y(uo),{value:o.value,"onUpdate:value":u[0]||(u[0]=h=>o.value=h)},{default:N(()=>[_(y(It),null,{default:N(()=>[_(y(At),{value:!1},{default:N(()=>[O(" 字符搜索 ")]),_:1}),_(y(At),{value:!0},{default:N(()=>[O(" 选择器查询 ")]),_:1})]),_:1})]),_:1},8,["value"]),le("div",{"flex-1":"","cursor-move":"",ref:f},null,512)]),_(y(ho),null,{default:N(()=>[_(y(fo),{value:l.value,"onUpdate:value":u[1]||(u[1]=h=>l.value=h),placeholder:o.value?"请输入选择器":"请输入字符",onKeyup:Jn(y(a),["enter"])},null,8,["value","placeholder","onKeyup"]),_(y(ft),{onClick:y(a)},{default:N(()=>[O(te(o.value?"查询":"搜索"),1)]),_:1},8,["onClick"])]),_:1}),gr,_(y(Ro),null,{default:N(()=>[(G(!0),$e(pt,null,vt(y(r),(h,s)=>(G(),re(y(Do),{key:h.selector.toString()},{header:N(()=>[le("span",vr,te((typeof h.selector=="string"?"字符搜索":"选择器查询")+"："+h.selector.toString()),1)]),"header-extra":N(()=>[O(te(h.results.length+"个节点")+" ",1),pr,_(y(ft),{onClick:Qn(c=>y(r).splice(s,1),["stop"])},{default:N(()=>[O(" 删除 ")]),_:2},1032,["onClick"])]),default:N(()=>[_(y(It),{style:{"max-height":"400px","overflow-y":"scroll","padding-bottom":"10px"}},{default:N(()=>[(G(!0),$e(pt,null,vt(h.results,c=>(G(),re(y(ft),{key:c.id,onClick:g=>d.onUpdateFocusNode(c),size:"small"},{default:N(()=>[O(te(y(bt)(c)),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}))}}),mr={flex:"","flex-col":""},yr=z({__name:"WindowCard",props:{snapshot:{},rootNode:{},focusNode:{},onUpdateFocusNode:{type:Function,default:()=>()=>{}}},setup(e){const t=e,l=ne([]);he(async()=>{var p;if(!t.focusNode)return;const s=t.focusNode.id;let c=t.focusNode.parent;if(!c)return;const g=new Set(l.value);for(;c;)g.add(c.id),c=c.parent;g.size!=l.value.length&&(l.value=[...g],await Je(),(p=r.value)==null||p.scrollTo({key:s}))});const r=ne(),a=(s,c,g)=>{},o=({option:s,checked:c,selected:g})=>{},d=(s,c)=>{var g;return c.id===((g=t.focusNode)==null?void 0:g.id)},u=s=>{var c;return{onClick:()=>{t.onUpdateFocusNode(s.option)},style:{color:s.option.id==((c=t.focusNode)==null?void 0:c.id)?"#00F":void 0}}},f=s=>s.option.attr.childCount||"",h=s=>bt(s.option);return(s,c)=>(G(),$e("div",mr,[_(y(qt),{size:"small",striped:"",singleLine:!1,class:"table-fixed"},{default:N(()=>[_(y(Bo),null,{default:N(()=>[_(y(Qe),null,{default:N(()=>[_(y(ue),{class:"w-150px"},{default:N(()=>[O(" Device ")]),_:1}),_(y(ue),{class:"w-110px"},{default:N(()=>[O(" Name ")]),_:1}),_(y(ue),{class:"w-110px"},{default:N(()=>[O(" VersionName ")]),_:1}),_(y(ue),{class:"w-110px"},{default:N(()=>[O(" VersionCode ")]),_:1}),_(y(ue),{class:"w-240px"},{default:N(()=>[O(" AppId ")]),_:1}),_(y(ue),null,{default:N(()=>[O(" ActivityId ")]),_:1}),_(y(ue),{class:"w-175px"},{default:N(()=>[O(" 操作 ")]),_:1})]),_:1})]),_:1}),_(y(Xt),null,{default:N(()=>[_(y(Qe),null,{default:N(()=>[_(y(fe),{class:"whitespace-nowrap"},{default:N(()=>[O(te(`${s.snapshot.manufacturer} Android ${s.snapshot.release||""}`),1)]),_:1}),_(y(fe),{class:"whitespace-nowrap",onClick:c[0]||(c[0]=g=>y(Pe)(s.snapshot.appName))},{default:N(()=>[_(y(Le),null,{default:N(()=>[O(te(s.snapshot.appName),1)]),_:1})]),_:1}),_(y(fe),{class:"whitespace-nowrap",onClick:c[1]||(c[1]=g=>y(Pe)(s.snapshot.appVersionName))},{default:N(()=>[_(y(Le),null,{default:N(()=>[O(te(s.snapshot.appVersionName),1)]),_:1})]),_:1}),_(y(fe),{class:"whitespace-nowrap",onClick:c[2]||(c[2]=g=>y(Pe)(s.snapshot.appVersionCode.toString()))},{default:N(()=>[_(y(Le),null,{default:N(()=>[O(te(s.snapshot.appVersionCode),1)]),_:1})]),_:1}),_(y(fe),{class:"whitespace-nowrap",onClick:c[3]||(c[3]=g=>y(Pe)(s.snapshot.appId))},{default:N(()=>[_(y(Le),null,{default:N(()=>[O(te(s.snapshot.appId),1)]),_:1})]),_:1}),_(y(fe),{onClick:c[4]||(c[4]=g=>y(Pe)(s.snapshot.activityId)),class:"break-words"},{default:N(()=>[_(y(Le),null,{default:N(()=>[O(te(s.snapshot.activityId),1)]),_:1})]),_:1}),_(y(fe),null,{default:N(()=>[Vt(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})]),_:3}),_(y(tr),{ref_key:"treeRef",ref:r,virtualScroll:"","onUpdate:checkedKeys":a,keyField:"id",defaultExpandedKeys:l.value,data:[s.rootNode],filter:d,nodeProps:u,renderSuffix:o,renderPrefix:f,renderLabel:h},null,8,["defaultExpandedKeys","data","filter","nodeProps","renderSuffix","renderPrefix","renderLabel"])]))}});const xr=mo(yr,[["__scopeId","data-v-982cde42"]]),kr={"h-full":"",flex:"","gap-5px":"","p-5px":"","box-border":""},Dr=z({__name:"SnapshotPage",setup(e){const t=eo(),l=to(),r=bo(),a=I(()=>String(t.params.snapshotId||"")),o=ne(""),d=ne();he(async()=>{const s=await Kn.getItem(a.value);if(!s){de.error("快照数据缺失");return}const c=await Dn.getItem(a.value);if(!c){de.create("截屏数据缺失");return}o.value=URL.createObjectURL(new Blob([c])),d.value=s,u.value=rr(s.nodes),r.value="快照-"+s.appName||s.appId});const u=ne(),f=ne(),h=async()=>{de.success("删除成功,即将回到首页"),await Tn(2e3),l.replace({path:"/"})};return(s,c)=>(G(),$e("div",kr,[o.value&&d.value?(G(),re(ur,{key:0,url:o.value,snapshot:d.value,rootNode:u.value,focusNode:f.value,onUpdateFocusNode:c[0]||(c[0]=g=>f.value=g)},null,8,["url","snapshot","rootNode","focusNode"])):Oe("",!0),d.value&&u.value?(G(),re(xr,{key:1,rootNode:u.value,snapshot:d.value,focusNode:f.value,onUpdateFocusNode:c[1]||(c[1]=g=>f.value=g),class:"flex-1"},{default:N(()=>[d.value?(G(),re(_n,{key:0,snapshot:d.value,onDelete:h,showPreview:!1},null,8,["snapshot"])):Oe("",!0)]),_:1},8,["rootNode","snapshot","focusNode"])):Oe("",!0),f.value?(G(),re(or,{key:2,focusNode:f.value},null,8,["focusNode"])):Oe("",!0),u.value?(G(),re(br,{key:3,rootNode:u.value,onUpdateFocusNode:c[2]||(c[2]=g=>f.value=g)},null,8,["rootNode"])):Oe("",!0)]))}});export{Dr as default};
//# sourceMappingURL=SnapshotPage-76cfe6ee.js.map
