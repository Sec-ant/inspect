import{d as m,ar as f,as as h,s as c,aa as d,aq as g,au as n,f as v,P as w,Q as _,h as x,t as y,o as R}from"./index-8a7e2619.js";import{t as S}from"./check-44032eaf.js";import{a as B}from"./import-dae22ec5.js";import{e as i,u as l,a as I}from"./storage-de3e12b9.js";import"./file_type-f9544e34.js";const k={class:"h-[calc(100%-10px)]",flex:"","gap-5px":"","p-5px":"","flex-col":"","flex-items-center":""},V=m({__name:"ImportPage",setup(U){const u=f(),s=h(),a=String(u.query.url||""),p=c(!0),o=c("加载中...");return d(async()=>{if(!S(a)){g.error("非法URL参数"),await i(1e3),s.replace({path:"/"});return}await i(1e3);const t=l[a];if(t)if(await I.getItem(t)){s.replace({name:"snapshot",params:{snapshotId:t}});return}else delete l[a];n.start();try{const[e]=await B(a)??[];if(e.status=="fulfilled"){n.finish();const r=e.value;r?(l[a]=r.id,p.value=!1,await i(500),s.replace({name:"snapshot",params:{snapshotId:r.id}})):o.value="获取资源失败"}else throw e.reason}catch{n.error(),o.value="加载资源失败"}}),(t,e)=>(R(),v("div",k,[w(x("div",{"mt-40px":""},y(o.value),513),[[_,p.value]])]))}});export{V as default};
//# sourceMappingURL=ImportPage-c440d41c.js.map
