import{d as m,ar as f,as as h,s as c,aa as d,aq as g,au as i,f as v,P as w,Q as _,h as x,t as R,o as S}from"./index-89bd64bf.js";import{t as y}from"./check-44032eaf.js";import{a as U}from"./import-d9f27b81.js";import{f as l,u as n,a as b,k,j as B,l as I,i as P}from"./storage-b53c4e07.js";import"./file_type-74916a33.js";const q={class:"h-[calc(100%-10px)]",flex:"","gap-5px":"","p-5px":"","flex-col":"","flex-items-center":""},C=m({__name:"ImportPage",setup(D){const u=f(),r=h(),a=String(u.query.url||""),p=c(!0),o=c("加载中...");return d(async()=>{if(!y(a)){g.error("非法URL参数"),await l(1e3),r.replace({path:"/"});return}await l(1e3);const s=n[a];if(s)if(await b.getItem(s)){r.replace({name:"snapshot",params:{snapshotId:s}});return}else delete n[a];i.start();try{const[t]=await U(a)??[];if(t.status=="fulfilled"){i.finish();const e=t.value;e!=null&&e.id?(n[a]=e.id,a.match(k)?B[e.id]=a:a.match(I)&&(P[e.id]=a),p.value=!1,await l(500),r.replace({name:"snapshot",params:{snapshotId:e.id}})):o.value="获取资源失败"}else throw t.reason}catch{i.error(),o.value="加载资源失败"}}),(s,t)=>(S(),v("div",q,[w(x("div",{"mt-40px":""},R(o.value),513),[[_,p.value]])]))}});export{C as default};
//# sourceMappingURL=ImportPage-107d2352.js.map
