import{_ as zo}from"./ActionCard.vue_vue_type_script_setup_true_lang-c62236db.js";import{d as $,l as k,m as Ut,n as q,c as B,p as xo,q as Nn,v as K,x as Wo,y as Uo,z as te,A as Ze,B as Vo,C as Ho,w as Me,b as Et,D as $t,a as bo,s as Pe,E as Ln,G as ve,h as we,H as mo,I as ko,J as Go,T as Xo,o as ee,g as C,f as R,u as S,j as V,e as lt,K as wn,F as Sn,t as Ie,i as Zo,L as Jo,M as Yo,N as Qo,k as gt}from"./index-ad85f81f.js";import{c as Rn,e as P,f as F,g as Q,h as M,i as _n,u as dt,j as Vt,k as On,l as Z,m as ea,n as wo,o as ta,r as qn,p as So,q as ra,t as Re,v as na,w as oa,x as aa,y as it,z as ia,A as la,B as gn,C as sa,D as da,E as yn,F as ua,G as ca,H as fa,I as xn,J as va,X as $n,K as ha,L as Cn,M as jn,b as bn,O as ke,a as pa,P as ga,Q as ya}from"./storage-890712bc.js";import{d as At,C as xa,e as ba,f as ma,g as ka,h as zn,V as wa,i as Sa,j as Wn,k as _a,l as Ca,m as jt,c as Un,n as Vn,o as Na,N as Ra,a as Oa}from"./task-c67d394b.js";import{e as Pa,a as Ma}from"./error-a6892b63.js";import"./file_type-f373f9ad.js";function _o(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Ia=$({name:"ChevronLeft",render(){return k("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k("path",{d:"M10.3536 3.14645C10.5488 3.34171 10.5488 3.65829 10.3536 3.85355L6.20711 8L10.3536 12.1464C10.5488 12.3417 10.5488 12.6583 10.3536 12.8536C10.1583 13.0488 9.84171 13.0488 9.64645 12.8536L5.14645 8.35355C4.95118 8.15829 4.95118 7.84171 5.14645 7.64645L9.64645 3.14645C9.84171 2.95118 10.1583 2.95118 10.3536 3.14645Z",fill:"currentColor"}))}}),Ea=$({name:"Switcher",render(){return k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k("path",{d:"M12 8l10 8l-10 8z"}))}}),Aa=e=>{const{fontWeight:t,textColor1:r,textColor2:n,textColorDisabled:o,dividerColor:a,fontSize:i}=e;return{titleFontSize:i,titleFontWeight:t,dividerColor:a,titleTextColor:r,titleTextColorDisabled:o,fontSize:i,textColor:n,arrowColor:n,arrowColorDisabled:o,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}},Da={name:"Collapse",common:Rn,self:Aa},Fa=Da,Ba=P("collapse","width: 100%;",[P("collapse-item",`
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 margin: var(--n-item-margin);
 `,[F("disabled",[Q("header","cursor: not-allowed;",[Q("header-main",`
 color: var(--n-title-text-color-disabled);
 `),P("collapse-item-arrow",`
 color: var(--n-arrow-color-disabled);
 `)])]),P("collapse-item","margin-left: 32px;"),M("&:first-child","margin-top: 0;"),M("&:first-child >",[Q("header","padding-top: 0;")]),F("left-arrow-placement",[Q("header",[P("collapse-item-arrow","margin-right: 4px;")])]),F("right-arrow-placement",[Q("header",[P("collapse-item-arrow","margin-left: 4px;")])]),Q("content-wrapper",[Q("content-inner","padding-top: 16px;"),_n({duration:"0.15s"})]),F("active",[Q("header",[F("active",[P("collapse-item-arrow","transform: rotate(90deg);")])])]),M("&:not(:first-child)","border-top: 1px solid var(--n-divider-color);"),Q("header",`
 font-size: var(--n-title-font-size);
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 transition: color .3s var(--n-bezier);
 position: relative;
 padding: var(--n-title-padding);
 color: var(--n-title-text-color);
 cursor: pointer;
 `,[Q("header-main",`
 display: flex;
 flex-wrap: nowrap;
 align-items: center;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 color: var(--n-title-text-color);
 `),Q("header-extra",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),P("collapse-item-arrow",`
 display: flex;
 transition:
 transform .15s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: 18px;
 color: var(--n-arrow-color);
 `)])])]),Ta=Object.assign(Object.assign({},dt.props),{defaultExpandedNames:{type:[Array,String],default:null},expandedNames:[Array,String],arrowPlacement:{type:String,default:"left"},accordion:{type:Boolean,default:!1},displayDirective:{type:String,default:"if"},onItemHeaderClick:[Function,Array],"onUpdate:expandedNames":[Function,Array],onUpdateExpandedNames:[Function,Array],onExpandedNamesChange:{type:[Function,Array],validator:()=>!0,default:void 0}}),Co=Nn("n-collapse"),Ka=$({name:"Collapse",props:Ta,setup(e,{slots:t}){const{mergedClsPrefixRef:r,inlineThemeDisabled:n,mergedRtlRef:o}=Ut(e),a=q(e.defaultExpandedNames),i=B(()=>e.expandedNames),s=At(i,a),d=dt("Collapse","-collapse",Ba,Fa,e,r);function c(_){const{"onUpdate:expandedNames":m,onUpdateExpandedNames:N,onExpandedNamesChange:O}=e;N&&Z(N,_),m&&Z(m,_),O&&Z(O,_),a.value=_}function f(_){const{onItemHeaderClick:m}=e;m&&Z(m,_)}function v(_,m,N){const{accordion:O}=e,{value:j}=s;if(O)_?(c([m]),f({name:m,expanded:!0,event:N})):(c([]),f({name:m,expanded:!1,event:N}));else if(!Array.isArray(j))c([m]),f({name:m,expanded:!0,event:N});else{const D=j.slice(),G=D.findIndex(oe=>m===oe);~G?(D.splice(G,1),c(D),f({name:m,expanded:!1,event:N})):(D.push(m),c(D),f({name:m,expanded:!0,event:N}))}}xo(Co,{props:e,mergedClsPrefixRef:r,expandedNamesRef:s,slots:t,toggleItem:v});const p=Vt("Collapse",o,r),h=B(()=>{const{common:{cubicBezierEaseInOut:_},self:{titleFontWeight:m,dividerColor:N,titlePadding:O,titleTextColor:j,titleTextColorDisabled:D,textColor:G,arrowColor:oe,fontSize:pe,titleFontSize:se,arrowColorDisabled:_e,itemMargin:de}}=d.value;return{"--n-font-size":pe,"--n-bezier":_,"--n-text-color":G,"--n-divider-color":N,"--n-title-padding":O,"--n-title-font-size":se,"--n-title-text-color":j,"--n-title-text-color-disabled":D,"--n-title-font-weight":m,"--n-arrow-color":oe,"--n-arrow-color-disabled":_e,"--n-item-margin":de}}),w=n?On("collapse",void 0,h,e):void 0;return{rtlEnabled:p,mergedTheme:d,mergedClsPrefix:r,cssVars:n?void 0:h,themeClass:w==null?void 0:w.themeClass,onRender:w==null?void 0:w.onRender}},render(){var e;return(e=this.onRender)===null||e===void 0||e.call(this),k("div",{class:[`${this.mergedClsPrefix}-collapse`,this.rtlEnabled&&`${this.mergedClsPrefix}-collapse--rtl`,this.themeClass],style:this.cssVars},this.$slots)}}),La=$({name:"CollapseItemContent",props:{displayDirective:{type:String,required:!0},show:Boolean,clsPrefix:{type:String,required:!0}},setup(e){return{onceTrue:ea(K(e,"show"))}},render(){return k(wo,null,{default:()=>{const{show:e,displayDirective:t,onceTrue:r,clsPrefix:n}=this,o=t==="show"&&r,a=k("div",{class:`${n}-collapse-item__content-wrapper`},k("div",{class:`${n}-collapse-item__content-inner`},this.$slots));return o?Wo(a,[[Uo,e]]):e?a:null}})}}),qa={title:String,name:[String,Number],disabled:Boolean,displayDirective:String},$a=$({name:"CollapseItem",props:qa,setup(e){const{mergedRtlRef:t}=Ut(e),r=ta(),n=te(()=>{var v;return(v=e.name)!==null&&v!==void 0?v:r}),o=Ze(Co);o||Vo("collapse-item","`n-collapse-item` must be placed inside `n-collapse`.");const{expandedNamesRef:a,props:i,mergedClsPrefixRef:s,slots:d}=o,c=B(()=>{const{value:v}=a;if(Array.isArray(v)){const{value:p}=n;return!~v.findIndex(h=>h===p)}else if(v){const{value:p}=n;return p!==v}return!0});return{rtlEnabled:Vt("Collapse",t,s),collapseSlots:d,randomName:r,mergedClsPrefix:s,collapsed:c,mergedDisplayDirective:B(()=>{const{displayDirective:v}=e;return v||i.displayDirective}),arrowPlacement:B(()=>i.arrowPlacement),handleClick(v){o&&!e.disabled&&o.toggleItem(c.value,n.value,v)}}},render(){const{collapseSlots:e,$slots:t,arrowPlacement:r,collapsed:n,mergedDisplayDirective:o,mergedClsPrefix:a,disabled:i}=this,s=qn(t.header,{collapsed:n},()=>[this.title]),d=t["header-extra"]||e["header-extra"],c=t.arrow||e.arrow;return k("div",{class:[`${a}-collapse-item`,`${a}-collapse-item--${r}-arrow-placement`,i&&`${a}-collapse-item--disabled`,!n&&`${a}-collapse-item--active`]},k("div",{class:[`${a}-collapse-item__header`,!n&&`${a}-collapse-item__header--active`]},k("div",{class:`${a}-collapse-item__header-main`,onClick:this.handleClick},r==="right"&&s,k("div",{class:`${a}-collapse-item-arrow`,key:this.rtlEnabled?0:1},qn(c,{collapsed:n},()=>{var f;return[k(So,{clsPrefix:a},{default:(f=e.expandIcon)!==null&&f!==void 0?f:()=>this.rtlEnabled?k(Ia,null):k(xa,null)})]})),r==="left"&&s),ra(d,{collapsed:n},f=>k("div",{class:`${a}-collapse-item__header-extra`,onClick:this.handleClick},f))),k(La,{clsPrefix:a,displayDirective:o,show:!n},t))}}),ja={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"},za=e=>{const{dividerColor:t,cardColor:r,modalColor:n,popoverColor:o,tableHeaderColor:a,tableColorStriped:i,textColor1:s,textColor2:d,borderRadius:c,fontWeightStrong:f,lineHeight:v,fontSizeSmall:p,fontSizeMedium:h,fontSizeLarge:w}=e;return Object.assign(Object.assign({},ja),{fontSizeSmall:p,fontSizeMedium:h,fontSizeLarge:w,lineHeight:v,borderRadius:c,borderColor:Re(r,t),borderColorModal:Re(n,t),borderColorPopover:Re(o,t),tdColor:r,tdColorModal:n,tdColorPopover:o,tdColorStriped:Re(r,i),tdColorStripedModal:Re(n,i),tdColorStripedPopover:Re(o,i),thColor:Re(r,a),thColorModal:Re(n,a),thColorPopover:Re(o,a),thTextColor:s,tdTextColor:d,thFontWeight:f})},Wa={name:"Table",common:Rn,self:za},Ua=Wa,Va=e=>{const{borderRadiusSmall:t,hoverColor:r,pressedColor:n,primaryColor:o,textColor3:a,textColor2:i,textColorDisabled:s,fontSize:d}=e;return{fontSize:d,nodeBorderRadius:t,nodeColorHover:r,nodeColorPressed:n,nodeColorActive:aa(o,{alpha:.1}),arrowColor:a,nodeTextColor:i,nodeTextColorDisabled:s,loadingColor:o,dropMarkColor:o}},Ha=na({name:"Tree",common:Rn,peers:{Checkbox:ba,Scrollbar:oa,Empty:ma},self:Va}),Ga=Ha,Xa=M([P("table",`
 font-size: var(--n-font-size);
 font-variant-numeric: tabular-nums;
 line-height: var(--n-line-height);
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 text-align: left;
 border-collapse: separate;
 border-spacing: 0;
 overflow: hidden;
 background-color: var(--n-td-color);
 border-color: var(--n-merged-border-color);
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 --n-merged-border-color: var(--n-border-color);
 `,[M("th",`
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 text-align: inherit;
 padding: var(--n-th-padding);
 vertical-align: inherit;
 text-transform: none;
 border: 0px solid var(--n-merged-border-color);
 font-weight: var(--n-th-font-weight);
 color: var(--n-th-text-color);
 background-color: var(--n-th-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 `,[M("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),M("td",`
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 padding: var(--n-td-padding);
 color: var(--n-td-text-color);
 background-color: var(--n-td-color);
 border: 0px solid var(--n-merged-border-color);
 border-right: 1px solid var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 `,[M("&:last-child",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),F("bordered",`
 border: 1px solid var(--n-merged-border-color);
 border-radius: var(--n-border-radius);
 `,[M("tr",[M("&:last-child",[M("td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `)])])]),F("single-line",[M("th",`
 border-right: 0px solid var(--n-merged-border-color);
 `),M("td",`
 border-right: 0px solid var(--n-merged-border-color);
 `)]),F("single-column",[M("tr",[M("&:not(:last-child)",[M("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])]),F("striped",[M("tr:nth-of-type(even)",[M("td","background-color: var(--n-td-color-striped)")])]),it("bottom-bordered",[M("tr",[M("&:last-child",[M("td",`
 border-bottom: 0px solid var(--n-merged-border-color);
 `)])])])]),ia(P("table",`
 background-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 `,[M("th",`
 background-color: var(--n-th-color-modal);
 `),M("td",`
 background-color: var(--n-td-color-modal);
 `)])),la(P("table",`
 background-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 `,[M("th",`
 background-color: var(--n-th-color-popover);
 `),M("td",`
 background-color: var(--n-td-color-popover);
 `)]))]),Za=Object.assign(Object.assign({},dt.props),{bordered:{type:Boolean,default:!0},bottomBordered:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!0},striped:Boolean,singleColumn:Boolean,size:{type:String,default:"medium"}}),No=$({name:"Table",props:Za,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:r,mergedRtlRef:n}=Ut(e),o=dt("Table","-table",Xa,Ua,e,t),a=Vt("Table",n,t),i=B(()=>{const{size:d}=e,{self:{borderColor:c,tdColor:f,tdColorModal:v,tdColorPopover:p,thColor:h,thColorModal:w,thColorPopover:_,thTextColor:m,tdTextColor:N,borderRadius:O,thFontWeight:j,lineHeight:D,borderColorModal:G,borderColorPopover:oe,tdColorStriped:pe,tdColorStripedModal:se,tdColorStripedPopover:_e,[gn("fontSize",d)]:de,[gn("tdPadding",d)]:ge,[gn("thPadding",d)]:Ee},common:{cubicBezierEaseInOut:$e}}=o.value;return{"--n-bezier":$e,"--n-td-color":f,"--n-td-color-modal":v,"--n-td-color-popover":p,"--n-td-text-color":N,"--n-border-color":c,"--n-border-color-modal":G,"--n-border-color-popover":oe,"--n-border-radius":O,"--n-font-size":de,"--n-th-color":h,"--n-th-color-modal":w,"--n-th-color-popover":_,"--n-th-font-weight":j,"--n-th-text-color":m,"--n-line-height":D,"--n-td-padding":ge,"--n-th-padding":Ee,"--n-td-color-striped":pe,"--n-td-color-striped-modal":se,"--n-td-color-striped-popover":_e}}),s=r?On("table",B(()=>e.size[0]),i,e):void 0;return{rtlEnabled:a,mergedClsPrefix:t,cssVars:r?void 0:i,themeClass:s==null?void 0:s.themeClass,onRender:s==null?void 0:s.onRender}},render(){var e;const{mergedClsPrefix:t}=this;return(e=this.onRender)===null||e===void 0||e.call(this),k("table",{class:[`${t}-table`,this.themeClass,{[`${t}-table--rtl`]:this.rtlEnabled,[`${t}-table--bottom-bordered`]:this.bottomBordered,[`${t}-table--bordered`]:this.bordered,[`${t}-table--single-line`]:this.singleLine,[`${t}-table--single-column`]:this.singleColumn,[`${t}-table--striped`]:this.striped}],style:this.cssVars},this.$slots)}}),He=$({name:"Th",render(){return k("th",null,this.$slots)}}),zt=$({name:"Tr",render(){return k("tr",null,this.$slots)}}),Ge=$({name:"Td",render(){return k("td",null,this.$slots)}}),Ja=$({name:"Thead",render(){return k("thead",null,this.$slots)}}),Ro=$({name:"Tbody",render(){return k("tbody",null,this.$slots)}}),Oo=Nn("n-tree-select"),Ft=Nn("n-tree"),Ya=$({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:t}=Ze(Ft,null);return()=>{const{clsPrefix:r}=e;return k("span",{"data-switcher":!0,class:[`${r}-tree-node-switcher`,e.expanded&&`${r}-tree-node-switcher--expanded`,e.hide&&`${r}-tree-node-switcher--hide`],onClick:e.onClick},k("div",{class:`${r}-tree-node-switcher__icon`},k(sa,null,{default:()=>{if(e.loading)return k(da,{clsPrefix:r,key:"loading",radius:85,strokeWidth:20});const{value:n}=t;return n?n({expanded:e.expanded,selected:e.selected}):k(So,{clsPrefix:r,key:"switcher"},{default:()=>k(Ea,null)})}})))}}}),Qa=$({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const t=Ze(Ft);function r(o){const{onCheck:a}=e;a&&a(o)}function n(o){e.indeterminate?r(!1):r(o)}return{handleUpdateValue:n,mergedTheme:t.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:t,checked:r,indeterminate:n,disabled:o,focusable:a,handleUpdateValue:i}=this;return k("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],"data-checkbox":!0},k(ka,{focusable:a,disabled:o,theme:t.peers.Checkbox,themeOverrides:t.peerOverrides.Checkbox,checked:r,indeterminate:n,onUpdateChecked:i}))}}),ei=$({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:t,renderPrefixRef:r,renderSuffixRef:n,labelFieldRef:o}=Ze(Ft),a=q(null);function i(d){const{onClick:c}=e;c&&c(d)}function s(d){i(d)}return{selfRef:a,renderLabel:t,renderPrefix:r,renderSuffix:n,labelField:o,handleClick:s}},render(){const{clsPrefix:e,labelField:t,nodeProps:r,checked:n=!1,selected:o=!1,renderLabel:a,renderPrefix:i,renderSuffix:s,handleClick:d,onDragstart:c,tmNode:{rawNode:f,rawNode:{prefix:v,suffix:p,[t]:h}}}=this;return k("span",Object.assign({},r,{ref:"selfRef",class:[`${e}-tree-node-content`,r==null?void 0:r.class],onClick:d,draggable:c===void 0?void 0:!0,onDragstart:c}),i||v?k("div",{class:`${e}-tree-node-content__prefix`},i?i({option:f,selected:o,checked:n}):yn(v)):null,k("div",{class:`${e}-tree-node-content__text`},a?a({option:f,selected:o,checked:n}):yn(h)),s||p?k("div",{class:`${e}-tree-node-content__suffix`},s?s({option:f,selected:o,checked:n}):yn(p)):null)}});function Hn({position:e,offsetLevel:t,indent:r,el:n}){const o={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")o.left=0,o.top=0,o.bottom=0,o.borderRadius="inherit",o.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const a=e==="before"?"top":"bottom";o[a]=0,o.left=`${n.offsetLeft+6-t*r}px`,o.height="2px",o.backgroundColor="var(--n-drop-mark-color)",o.transformOrigin=a,o.borderRadius="1px",o.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return k("div",{style:o})}function ti({dropPosition:e,node:t}){return t.isLeaf===!1||t.children?!0:e!=="inside"}function ri(e){return B(()=>e.leafOnly?"child":e.checkStrategy)}function Ke(e,t){return!!e.rawNode[t]}function Po(e,t,r,n){e==null||e.forEach(o=>{r(o),Po(o[t],t,r,n),n(o)})}function ni(e,t,r,n,o){const a=new Set,i=new Set,s=[];return Po(e,n,d=>{if(s.push(d),o(t,d)){i.add(d[r]);for(let c=s.length-2;c>=0;--c)if(!a.has(s[c][r]))a.add(s[c][r]);else return}},()=>{s.pop()}),{expandedKeys:Array.from(a),highlightKeySet:i}}if(ua&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function oi(e,t,r,n,o){const a=new Set,i=new Set,s=new Set,d=[],c=[],f=[];function v(h){h.forEach(w=>{if(f.push(w),t(r,w)){a.add(w[n]),s.add(w[n]);for(let m=f.length-2;m>=0;--m){const N=f[m][n];if(!i.has(N))i.add(N),a.has(N)&&a.delete(N);else break}}const _=w[o];_&&v(_),f.pop()})}v(e);function p(h,w){h.forEach(_=>{const m=_[n],N=a.has(m),O=i.has(m);if(!N&&!O)return;const j=_[o];if(j)if(N)w.push(_);else{d.push(m);const D=Object.assign(Object.assign({},_),{[o]:[]});w.push(D),p(j,D[o])}else w.push(_)})}return p(e,c),{filteredTree:c,highlightKeySet:s,expandedKeys:d}}const ai=$({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const t=Ze(Ft),{droppingNodeParentRef:r,droppingMouseNodeRef:n,draggingNodeRef:o,droppingPositionRef:a,droppingOffsetLevelRef:i,nodePropsRef:s,indentRef:d,blockLineRef:c,checkboxPlacementRef:f,checkOnClickRef:v,disabledFieldRef:p}=t,h=te(()=>!!e.tmNode.rawNode.checkboxDisabled),w=te(()=>Ke(e.tmNode,p.value)),_=te(()=>t.disabledRef.value||w.value),m=B(()=>{const{value:y}=s;if(y)return y({option:e.tmNode.rawNode})}),N=q(null),O={value:null};Ho(()=>{O.value=N.value.$el});function j(){const{tmNode:y}=e;if(!y.isLeaf&&!y.shallowLoaded){if(!t.loadingKeysRef.value.has(y.key))t.loadingKeysRef.value.add(y.key);else return;const{onLoadRef:{value:I}}=t;I&&I(y.rawNode).then(L=>{L!==!1&&t.handleSwitcherClick(y)}).finally(()=>{t.loadingKeysRef.value.delete(y.key)})}else t.handleSwitcherClick(y)}const D=te(()=>!w.value&&t.selectableRef.value&&(t.internalTreeSelect?t.mergedCheckStrategyRef.value!=="child"||t.multipleRef.value&&t.cascadeRef.value||e.tmNode.isLeaf:!0)),G=te(()=>t.checkableRef.value&&(t.cascadeRef.value||t.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),oe=te(()=>t.displayedCheckedKeysRef.value.includes(e.tmNode.key)),pe=te(()=>{const{value:y}=G;if(!y)return!1;const{value:I}=v;return typeof I=="boolean"?I:I(e.tmNode.rawNode)});function se(y){const{value:I}=t.expandOnClickRef,{value:L}=D,{value:Ae}=pe;if(!L&&!I&&!Ae||zn(y,"checkbox")||zn(y,"switcher"))return;const{tmNode:Je}=e;L&&t.handleSelect(Je),I&&!Je.isLeaf&&j(),Ae&&ge(!oe.value)}function _e(y){var I,L;c.value||(_.value||se(y),(L=(I=m.value)===null||I===void 0?void 0:I.onClick)===null||L===void 0||L.call(I,y))}function de(y){var I,L;c.value&&(_.value||se(y),(L=(I=m.value)===null||I===void 0?void 0:I.onClick)===null||L===void 0||L.call(I,y))}function ge(y){t.handleCheck(e.tmNode,y)}function Ee(y){t.handleDragStart({event:y,node:e.tmNode})}function $e(y){y.currentTarget===y.target&&t.handleDragEnter({event:y,node:e.tmNode})}function ie(y){y.preventDefault(),t.handleDragOver({event:y,node:e.tmNode})}function ye(y){t.handleDragEnd({event:y,node:e.tmNode})}function xe(y){y.currentTarget===y.target&&t.handleDragLeave({event:y,node:e.tmNode})}function ut(y){y.preventDefault(),a.value!==null&&t.handleDrop({event:y,node:e.tmNode,dropPosition:a.value})}return{showDropMark:te(()=>{const{value:y}=o;if(!y)return;const{value:I}=a;if(!I)return;const{value:L}=n;if(!L)return;const{tmNode:Ae}=e;return Ae.key===L.key}),showDropMarkAsParent:te(()=>{const{value:y}=r;if(!y)return!1;const{tmNode:I}=e,{value:L}=a;return L==="before"||L==="after"?y.key===I.key:!1}),pending:te(()=>t.pendingNodeKeyRef.value===e.tmNode.key),loading:te(()=>t.loadingKeysRef.value.has(e.tmNode.key)),highlight:te(()=>{var y;return(y=t.highlightKeySetRef.value)===null||y===void 0?void 0:y.has(e.tmNode.key)}),checked:oe,indeterminate:te(()=>t.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:te(()=>t.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:te(()=>t.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:_,checkable:G,mergedCheckOnClick:pe,checkboxDisabled:h,selectable:D,expandOnClick:t.expandOnClickRef,internalScrollable:t.internalScrollableRef,draggable:t.draggableRef,blockLine:c,nodeProps:m,checkboxFocusable:t.internalCheckboxFocusableRef,droppingPosition:a,droppingOffsetLevel:i,indent:d,checkboxPlacement:f,contentInstRef:N,contentElRef:O,handleCheck:ge,handleDrop:ut,handleDragStart:Ee,handleDragEnter:$e,handleDragOver:ie,handleDragEnd:ye,handleDragLeave:xe,handleLineClick:de,handleContentClick:_e,handleSwitcherClick:j}},render(){const{tmNode:e,clsPrefix:t,checkable:r,expandOnClick:n,selectable:o,selected:a,checked:i,highlight:s,draggable:d,blockLine:c,indent:f,disabled:v,pending:p,internalScrollable:h,nodeProps:w,checkboxPlacement:_}=this,m=d&&!v?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,N=h?_o(e.key):void 0,O=_==="right",j=r?k(Qa,{right:O,focusable:this.checkboxFocusable,disabled:v||this.checkboxDisabled,clsPrefix:t,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return k("div",Object.assign({class:`${t}-tree-node-wrapper`},m),k("div",Object.assign({},c?w:void 0,{class:[`${t}-tree-node`,{[`${t}-tree-node--selected`]:a,[`${t}-tree-node--checkable`]:r,[`${t}-tree-node--highlight`]:s,[`${t}-tree-node--pending`]:p,[`${t}-tree-node--disabled`]:v,[`${t}-tree-node--selectable`]:o,[`${t}-tree-node--clickable`]:o||n||this.mergedCheckOnClick},w==null?void 0:w.class],"data-key":N,draggable:d&&c,onClick:this.handleLineClick,onDragstart:d&&c&&!v?this.handleDragStart:void 0}),ca(e.level,k("div",{class:`${t}-tree-node-indent`},k("div",{style:{width:`${f}px`}}))),k(Ya,{clsPrefix:t,expanded:this.expanded,selected:a,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),O?null:j,k(ei,{ref:"contentInstRef",clsPrefix:t,checked:i,selected:a,onClick:this.handleContentClick,nodeProps:c?void 0:w,onDragstart:d&&!c&&!v?this.handleDragStart:void 0,tmNode:e}),d?this.showDropMark?Hn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:f}):this.showDropMarkAsParent?Hn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:f}):null:null,O?j:null))}}),Mo=ai;function ii({props:e,fNodesRef:t,mergedExpandedKeysRef:r,mergedSelectedKeysRef:n,handleSelect:o,handleSwitcherClick:a}){const{value:i}=n,s=Ze(Oo,null),d=s?s.pendingNodeKeyRef:q(i.length?i[i.length-1]:null);function c(f){if(!e.keyboard)return;const{value:v}=d;if(v===null){if((f.key==="ArrowDown"||f.key==="ArrowUp")&&f.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(f.key)&&v===null){const{value:p}=t;let h=0;for(;h<p.length;){if(!p[h].disabled){d.value=p[h].key;break}h+=1}}}else{const{value:p}=t;let h=p.findIndex(w=>w.key===v);if(!~h)return;if(f.key==="Enter")o(p[h]);else if(f.key==="ArrowDown")for(f.preventDefault(),h+=1;h<p.length;){if(!p[h].disabled){d.value=p[h].key;break}h+=1}else if(f.key==="ArrowUp")for(f.preventDefault(),h-=1;h>=0;){if(!p[h].disabled){d.value=p[h].key;break}h-=1}else if(f.key==="ArrowLeft"){const w=p[h];if(w.isLeaf||!r.value.includes(v)){const _=w.getParent();_&&(d.value=_.key)}else a(w)}else if(f.key==="ArrowRight"){const w=p[h];if(w.isLeaf)return;if(!r.value.includes(v))a(w);else for(h+=1;h<p.length;){if(!p[h].disabled){d.value=p[h].key;break}h+=1}}}}return{pendingNodeKeyRef:d,handleKeydown:c}}const li=$({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return k(wo,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>k("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:fa(this.height)}},this.nodes.map(t=>k(Mo,{clsPrefix:e,tmNode:t})))})}}),si=P("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[M("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),M(">",[P("tree-node",[M("&:first-child",{marginTop:0})])]),P("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 height: 0;
 `),P("tree-motion-wrapper",[F("expand",[_n({duration:"0.2s"})]),F("collapse",[_n({duration:"0.2s",reverse:!0})])]),P("tree-node-wrapper",`
 box-sizing: border-box;
 padding: 3px 0;
 `),P("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[F("highlight",[P("tree-node-content",[Q("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),F("disabled",[P("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),it("disabled",[F("clickable",[P("tree-node-content",`
 cursor: pointer;
 `)])])]),F("block-node",[P("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),it("block-line",[P("tree-node",[it("disabled",[P("tree-node-content",[M("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),F("selectable",[P("tree-node-content",[M("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),F("pending",[P("tree-node-content",`
 background-color: var(--n-node-color-hover);
 `)]),F("selected",[P("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),F("block-line",[P("tree-node",[it("disabled",[M("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),F("pending",`
 background-color: var(--n-node-color-hover);
 `),F("selectable",[it("selected",[M("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),F("selected",{backgroundColor:"var(--n-node-color-active)"})]),F("disabled",`
 cursor: not-allowed;
 `)])]),P("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: 24px;
 width: 24px;
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[Q("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[P("icon",[xn()]),P("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[xn()]),P("base-icon",[xn()])]),F("hide",{visibility:"hidden"}),F("expanded",{transform:"rotate(90deg)"})]),P("tree-node-checkbox",`
 display: inline-flex;
 height: 24px;
 width: 16px;
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 margin-right: 4px;
 `,[F("right","margin-left: 4px;")]),F("checkable",[P("tree-node-content",`
 padding: 0 6px;
 `)]),P("tree-node-content",`
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: 24px;
 box-sizing: border-box;
 line-height: 1.5;
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 text-decoration-color: #0000;
 text-decoration-line: underline;
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[M("&:last-child",{marginBottom:0}),Q("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),Q("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),Q("suffix",`
 display: inline-flex;
 `)]),Q("empty","margin: auto;")]);var di=globalThis&&globalThis.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(f){try{c(n.next(f))}catch(v){i(v)}}function d(f){try{c(n.throw(f))}catch(v){i(v)}}function c(f){f.done?a(f.value):o(f.value).then(s,d)}c((n=n.apply(e,t||[])).next())})};const qt=30;function ui(e,t,r,n){return{getIsGroup(){return!1},getKey(a){return a[e]},getChildren:n||(a=>a[t]),getDisabled(a){return!!(a[r]||a.checkboxDisabled)}}}const ci={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},fi=Object.assign(Object.assign(Object.assign(Object.assign({},dt.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:ti},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),ci),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),vi=$({name:"Tree",props:fi,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:r,mergedRtlRef:n}=Ut(e),o=Vt("Tree",n,t),a=dt("Tree","-tree",si,Ga,e,t),i=q(null),s=q(null),d=q(null);function c(){var l;return(l=d.value)===null||l===void 0?void 0:l.listElRef}function f(){var l;return(l=d.value)===null||l===void 0?void 0:l.itemsElRef}const v=B(()=>{const{filter:l}=e;if(l)return l;const{labelField:u}=e;return(g,x)=>{if(!g.length)return!0;const b=x[u];return typeof b=="string"?b.toLowerCase().includes(g.toLowerCase()):!1}}),p=B(()=>{const{pattern:l}=e;return l?!l.length||!v.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:oi(e.data,v.value,l,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),h=B(()=>Sa(e.showIrrelevantNodes?e.data:p.value.filteredTree,ui(e.keyField,e.childrenField,e.disabledField,e.getChildren))),w=Ze(Oo,null),_=e.internalTreeSelect?w.dataTreeMate:h,{watchProps:m}=e,N=q([]);m!=null&&m.includes("defaultCheckedKeys")?Me(()=>{N.value=e.defaultCheckedKeys}):N.value=e.defaultCheckedKeys;const O=K(e,"checkedKeys"),j=At(O,N),D=B(()=>_.value.getCheckedKeys(j.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),G=ri(e),oe=B(()=>D.value.checkedKeys),pe=B(()=>{const{indeterminateKeys:l}=e;return l!==void 0?l:D.value.indeterminateKeys}),se=q([]);m!=null&&m.includes("defaultSelectedKeys")?Me(()=>{se.value=e.defaultSelectedKeys}):se.value=e.defaultSelectedKeys;const _e=K(e,"selectedKeys"),de=At(_e,se),ge=q([]),Ee=l=>{ge.value=e.defaultExpandAll?_.value.getNonLeafKeys():l===void 0?e.defaultExpandedKeys:l};m!=null&&m.includes("defaultExpandedKeys")?Me(()=>{Ee(void 0)}):Me(()=>{Ee(e.defaultExpandedKeys)});const $e=K(e,"expandedKeys"),ie=At($e,ge),ye=B(()=>h.value.getFlattenedNodes(ie.value)),{pendingNodeKeyRef:xe,handleKeydown:ut}=ii({props:e,mergedSelectedKeysRef:de,fNodesRef:ye,mergedExpandedKeysRef:ie,handleSelect:Ue,handleSwitcherClick:pt});let y=null,I=null;const L=q(new Set),Ae=B(()=>e.internalHighlightKeySet||p.value.highlightKeySet),Je=At(Ae,L),Ye=q(new Set),Zr=B(()=>ie.value.filter(l=>!Ye.value.has(l)));let Bt=0;const je=q(null),Qe=q(null),et=q(null),tt=q(null),rt=q(0),Jr=B(()=>{const{value:l}=Qe;return l?l.parent:null});Et(K(e,"data"),()=>{Ye.value.clear(),xe.value=null,We()},{deep:!1});let ct=!1;const ft=()=>{ct=!0,$t(()=>{ct=!1})};let ze;Et(K(e,"pattern"),(l,u)=>{if(e.showIrrelevantNodes)if(ze=void 0,l){const{expandedKeys:g,highlightKeySet:x}=ni(e.data,e.pattern,e.keyField,e.childrenField,v.value);L.value=x,ft(),Fe(g,ae(g),{node:null,action:"filter"})}else L.value=new Set;else if(!l.length)ze!==void 0&&(ft(),Fe(ze,ae(ze),{node:null,action:"filter"}));else{u.length||(ze=ie.value);const{expandedKeys:g}=p.value;g!==void 0&&(ft(),Fe(g,ae(g),{node:null,action:"filter"}))}});function Tt(l){return di(this,void 0,void 0,function*(){const{onLoad:u}=e;if(!u){yield Promise.resolve();return}const{value:g}=Ye;if(!g.has(l.key)){g.add(l.key);try{(yield u(l.rawNode))===!1&&ce()}catch(x){console.error(x),ce()}g.delete(l.key)}})}Me(()=>{var l;const{value:u}=h;if(!u)return;const{getNode:g}=u;(l=ie.value)===null||l===void 0||l.forEach(x=>{const b=g(x);b&&!b.shallowLoaded&&Tt(b)})});const De=q(!1),be=q([]);Et(Zr,(l,u)=>{if(!e.animated||ct){$t(nt);return}const g=new Set(u);let x=null,b=null;for(const z of l)if(!g.has(z)){if(x!==null)return;x=z}const J=new Set(l);for(const z of u)if(!J.has(z)){if(b!==null)return;b=z}if(x===null&&b===null)return;const{virtualScroll:X}=e,Ne=(X?d.value.listElRef:i.value).offsetHeight,Ve=Math.ceil(Ne/qt)+1;let me;if(x!==null&&(me=u),b!==null&&(me===void 0?me=l:me=me.filter(z=>z!==b)),De.value=!0,be.value=h.value.getFlattenedNodes(me),x!==null){const z=be.value.findIndex(Y=>Y.key===x);if(~z){const Y=be.value[z].children;if(Y){const Te=Wn(Y,l);be.value.splice(z+1,0,{__motion:!0,mode:"expand",height:X?Te.length*qt:void 0,nodes:X?Te.slice(0,Ve):Te})}}}if(b!==null){const z=be.value.findIndex(Y=>Y.key===b);if(~z){const Y=be.value[z].children;if(!Y)return;De.value=!0;const Te=Wn(Y,l);be.value.splice(z+1,0,{__motion:!0,mode:"collapse",height:X?Te.length*qt:void 0,nodes:X?Te.slice(0,Ve):Te})}}});const Yr=B(()=>_a(ye.value)),Qr=B(()=>De.value?be.value:ye.value);function nt(){const{value:l}=s;l&&l.sync()}function en(){De.value=!1,e.virtualScroll&&$t(nt)}function ae(l){const{getNode:u}=_.value;return l.map(g=>{var x;return((x=u(g))===null||x===void 0?void 0:x.rawNode)||null})}function Fe(l,u,g){const{"onUpdate:expandedKeys":x,onUpdateExpandedKeys:b}=e;ge.value=l,x&&Z(x,l,u,g),b&&Z(b,l,u,g)}function Kt(l,u,g){const{"onUpdate:checkedKeys":x,onUpdateCheckedKeys:b}=e;N.value=l,b&&Z(b,l,u,g),x&&Z(x,l,u,g)}function tn(l,u){const{"onUpdate:indeterminateKeys":g,onUpdateIndeterminateKeys:x}=e;g&&Z(g,l,u),x&&Z(x,l,u)}function vt(l,u,g){const{"onUpdate:selectedKeys":x,onUpdateSelectedKeys:b}=e;se.value=l,b&&Z(b,l,u,g),x&&Z(x,l,u,g)}function rn(l){const{onDragenter:u}=e;u&&Z(u,l)}function nn(l){const{onDragleave:u}=e;u&&Z(u,l)}function on(l){const{onDragend:u}=e;u&&Z(u,l)}function an(l){const{onDragstart:u}=e;u&&Z(u,l)}function ln(l){const{onDragover:u}=e;u&&Z(u,l)}function sn(l){const{onDrop:u}=e;u&&Z(u,l)}function We(){dn(),Ce()}function dn(){je.value=null}function Ce(){rt.value=0,Qe.value=null,et.value=null,tt.value=null,ce()}function ce(){y&&(window.clearTimeout(y),y=null),I=null}function ht(l,u){if(e.disabled||Ke(l,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){Ue(l);return}const g=u?"check":"uncheck",{checkedKeys:x,indeterminateKeys:b}=_.value[g](l.key,oe.value,{cascade:e.cascade,checkStrategy:G.value,allowNotLoaded:e.allowCheckingNotLoaded});Kt(x,ae(x),{node:l.rawNode,action:g}),tn(b,ae(b))}function un(l){if(e.disabled)return;const{key:u}=l,{value:g}=ie,x=g.findIndex(b=>b===u);if(~x){const b=Array.from(g);b.splice(x,1),Fe(b,ae(b),{node:l.rawNode,action:"collapse"})}else{const b=h.value.getNode(u);if(!b||b.isLeaf)return;let J;if(e.accordion){const X=new Set(l.siblings.map(({key:Ne})=>Ne));J=g.filter(Ne=>!X.has(Ne)),J.push(u)}else J=g.concat(u);Fe(J,ae(J),{node:l.rawNode,action:"expand"})}}function pt(l){e.disabled||De.value||un(l)}function Ue(l){if(!(e.disabled||!e.selectable)){if(xe.value=l.key,e.internalUnifySelectCheck){const{value:{checkedKeys:u,indeterminateKeys:g}}=D;e.multiple?ht(l,!(u.includes(l.key)||g.includes(l.key))):Kt([l.key],ae([l.key]),{node:l.rawNode,action:"check"})}if(e.multiple){const u=Array.from(de.value),g=u.findIndex(x=>x===l.key);~g?e.cancelable&&u.splice(g,1):~g||u.push(l.key),vt(u,ae(u),{node:l.rawNode,action:~g?"unselect":"select"})}else de.value.includes(l.key)?e.cancelable&&vt([],[],{node:l.rawNode,action:"unselect"}):vt([l.key],ae([l.key]),{node:l.rawNode,action:"select"})}}function ot(l){if(y&&(window.clearTimeout(y),y=null),l.isLeaf)return;I=l.key;const u=()=>{if(I!==l.key)return;const{value:g}=et;if(g&&g.key===l.key&&!ie.value.includes(l.key)){const x=ie.value.concat(l.key);Fe(x,ae(x),{node:l.rawNode,action:"expand"})}y=null,I=null};l.shallowLoaded?y=window.setTimeout(()=>{u()},1e3):y=window.setTimeout(()=>{Tt(l).then(()=>{u()})},1e3)}function cn({event:l,node:u}){!e.draggable||e.disabled||Ke(u,e.disabledField)||(W({event:l,node:u},!1),rn({event:l,node:u.rawNode}))}function fn({event:l,node:u}){!e.draggable||e.disabled||Ke(u,e.disabledField)||nn({event:l,node:u.rawNode})}function Lt(l){l.target===l.currentTarget&&Ce()}function vn({event:l,node:u}){We(),!(!e.draggable||e.disabled||Ke(u,e.disabledField))&&on({event:l,node:u.rawNode})}function E({event:l,node:u}){!e.draggable||e.disabled||Ke(u,e.disabledField)||(Bt=l.clientX,je.value=u,an({event:l,node:u.rawNode}))}function W({event:l,node:u},g=!0){var x;if(!e.draggable||e.disabled||Ke(u,e.disabledField))return;const{value:b}=je;if(!b)return;const{allowDrop:J,indent:X}=e;g&&ln({event:l,node:u.rawNode});const Ne=l.currentTarget,{height:Ve,top:me}=Ne.getBoundingClientRect(),z=l.clientY-me;let Y;J({node:u.rawNode,dropPosition:"inside",phase:"drag"})?z<=8?Y="before":z>=Ve-8?Y="after":Y="inside":z<=Ve/2?Y="before":Y="after";const{value:jo}=Yr;let T,le;const hn=jo(u.key);if(hn===null){Ce();return}let Bn=!1;Y==="inside"?(T=u,le="inside"):Y==="before"?u.isFirstChild?(T=u,le="before"):(T=ye.value[hn-1],le="after"):(T=u,le="after"),!T.isLeaf&&ie.value.includes(T.key)&&(Bn=!0,le==="after"&&(T=ye.value[hn+1],T?le="before":(T=u,le="inside")));const Tn=T;if(et.value=Tn,!Bn&&b.isLastChild&&b.key===T.key&&(le="after"),le==="after"){let Kn=Bt-l.clientX,pn=0;for(;Kn>=X/2&&T.parent!==null&&T.isLastChild&&pn<1;)Kn-=X,pn+=1,T=T.parent;rt.value=pn}else rt.value=0;if((b.contains(T)||le==="inside"&&((x=b.parent)===null||x===void 0?void 0:x.key)===T.key)&&!(b.key===Tn.key&&b.key===T.key)){Ce();return}if(!J({node:T.rawNode,dropPosition:le,phase:"drag"})){Ce();return}if(b.key===T.key)ce();else if(I!==T.key)if(le==="inside"){if(e.expandOnDragenter){if(ot(T),!T.shallowLoaded&&I!==T.key){We();return}}else if(!T.shallowLoaded){We();return}}else ce();else le!=="inside"&&ce();tt.value=le,Qe.value=T}function fe({event:l,node:u,dropPosition:g}){if(!e.draggable||e.disabled||Ke(u,e.disabledField))return;const{value:x}=je,{value:b}=Qe,{value:J}=tt;if(!(!x||!b||!J)&&e.allowDrop({node:b.rawNode,dropPosition:J,phase:"drag"})&&x.key!==b.key){if(J==="before"){const X=x.getNext({includeDisabled:!0});if(X&&X.key===b.key){Ce();return}}if(J==="after"){const X=x.getPrev({includeDisabled:!0});if(X&&X.key===b.key){Ce();return}}sn({event:l,node:b.rawNode,dragNode:x.rawNode,dropPosition:g}),We()}}function Be(){nt()}function Ko(){nt()}function Lo(l){var u;if(e.virtualScroll||e.internalScrollable){const{value:g}=s;if(!((u=g==null?void 0:g.containerRef)===null||u===void 0)&&u.contains(l.relatedTarget))return;xe.value=null}else{const{value:g}=i;if(g!=null&&g.contains(l.relatedTarget))return;xe.value=null}}Et(xe,l=>{var u,g;if(l!==null){if(e.virtualScroll)(u=d.value)===null||u===void 0||u.scrollTo({key:l});else if(e.internalScrollable){const{value:x}=s;if(x===null)return;const b=(g=x.contentRef)===null||g===void 0?void 0:g.querySelector(`[data-key="${_o(l)}"]`);if(!b)return;x.scrollTo({el:b})}}}),xo(Ft,{loadingKeysRef:Ye,highlightKeySetRef:Je,displayedCheckedKeysRef:oe,displayedIndeterminateKeysRef:pe,mergedSelectedKeysRef:de,mergedExpandedKeysRef:ie,mergedThemeRef:a,mergedCheckStrategyRef:G,nodePropsRef:K(e,"nodeProps"),disabledRef:K(e,"disabled"),checkableRef:K(e,"checkable"),selectableRef:K(e,"selectable"),expandOnClickRef:K(e,"expandOnClick"),onLoadRef:K(e,"onLoad"),draggableRef:K(e,"draggable"),blockLineRef:K(e,"blockLine"),indentRef:K(e,"indent"),cascadeRef:K(e,"cascade"),checkOnClickRef:K(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:et,droppingNodeParentRef:Jr,draggingNodeRef:je,droppingPositionRef:tt,droppingOffsetLevelRef:rt,fNodesRef:ye,pendingNodeKeyRef:xe,disabledFieldRef:K(e,"disabledField"),internalScrollableRef:K(e,"internalScrollable"),internalCheckboxFocusableRef:K(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:K(e,"renderLabel"),renderPrefixRef:K(e,"renderPrefix"),renderSuffixRef:K(e,"renderSuffix"),renderSwitcherIconRef:K(e,"renderSwitcherIcon"),labelFieldRef:K(e,"labelField"),multipleRef:K(e,"multiple"),handleSwitcherClick:pt,handleDragEnd:vn,handleDragEnter:cn,handleDragLeave:fn,handleDragStart:E,handleDrop:fe,handleDragOver:W,handleSelect:Ue,handleCheck:ht});function qo(l){var u;(u=d.value)===null||u===void 0||u.scrollTo(l)}const $o={handleKeydown:ut,scrollTo:qo,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:l}=D.value;return{keys:l,options:ae(l)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:l}=D.value;return{keys:l,options:ae(l)}}},Fn=B(()=>{const{common:{cubicBezierEaseInOut:l},self:{fontSize:u,nodeBorderRadius:g,nodeColorHover:x,nodeColorPressed:b,nodeColorActive:J,arrowColor:X,loadingColor:Ne,nodeTextColor:Ve,nodeTextColorDisabled:me,dropMarkColor:z}}=a.value;return{"--n-arrow-color":X,"--n-loading-color":Ne,"--n-bezier":l,"--n-font-size":u,"--n-node-border-radius":g,"--n-node-color-active":J,"--n-node-color-hover":x,"--n-node-color-pressed":b,"--n-node-text-color":Ve,"--n-node-text-color-disabled":me,"--n-drop-mark-color":z}}),at=r?On("tree",void 0,Fn,e):void 0;return Object.assign(Object.assign({},$o),{mergedClsPrefix:t,mergedTheme:a,rtlEnabled:o,fNodes:Qr,aip:De,selfElRef:i,virtualListInstRef:d,scrollbarInstRef:s,handleFocusout:Lo,handleDragLeaveTree:Lt,handleScroll:Be,getScrollContainer:c,getScrollContent:f,handleAfterEnter:en,handleResize:Ko,cssVars:r?void 0:Fn,themeClass:at==null?void 0:at.themeClass,onRender:at==null?void 0:at.onRender})},render(){var e;const{fNodes:t,internalRenderEmpty:r}=this;if(!t.length&&r)return r();const{mergedClsPrefix:n,blockNode:o,blockLine:a,draggable:i,disabled:s,internalFocusable:d,checkable:c,handleKeydown:f,rtlEnabled:v,handleFocusout:p}=this,h=d&&!s,w=h?"0":void 0,_=[`${n}-tree`,v&&`${n}-tree--rtl`,c&&`${n}-tree--checkable`,(a||o)&&`${n}-tree--block-node`,a&&`${n}-tree--block-line`],m=O=>"__motion"in O?k(li,{height:O.height,nodes:O.nodes,clsPrefix:n,mode:O.mode,onAfterEnter:this.handleAfterEnter}):k(Mo,{key:O.key,tmNode:O,clsPrefix:n});if(this.virtualScroll){const{mergedTheme:O,internalScrollablePadding:j}=this,D=va(j||"0");return k($n,{ref:"scrollbarInstRef",onDragleave:i?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:_,theme:O.peers.Scrollbar,themeOverrides:O.peerOverrides.Scrollbar,tabindex:w,onKeydown:h?f:void 0,onFocusout:h?p:void 0},{default:()=>{var G;return(G=this.onRender)===null||G===void 0||G.call(this),k(wa,{ref:"virtualListInstRef",items:this.fNodes,itemSize:qt,ignoreItemResize:this.aip,paddingTop:D.top,paddingBottom:D.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:D.left,paddingRight:D.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:oe})=>m(oe)})}})}const{internalScrollable:N}=this;return _.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),N?k($n,{class:_,tabindex:w,onKeydown:h?f:void 0,onFocusout:h?p:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>k("div",{onDragleave:i?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(m))}):k("div",{class:_,tabindex:w,ref:"selfElRef",style:this.cssVars,onKeydown:h?f:void 0,onFocusout:h?p:void 0,onDragleave:i?this.handleDragLeaveTree:void 0},t.length?t.map(m):ha(this.$slots.empty,()=>[k(Ca,{class:`${n}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),hi=e=>{if(typeof e=="string"){const t=JSON.stringify(e);return"'"+t.substring(1,t.length-1).replaceAll("'","\\'")+"'"}return String(e)},pi=async e=>new Promise((t,r)=>{const n=new Image;n.onload=()=>{t({height:n.naturalHeight,width:n.naturalWidth})},n.onerror=r,n.src=e});function*gi(e,t=[]){const r=[];for(r.push(e);r.length>0;){const n=r.pop();t.includes(n.key)||(yield n,r.push(...[...n.children].reverse()))}}const yi=e=>{const t=e.map(r=>{var o,a,i;(o=r.attr).name??(o.name=r.attr.className);let n=((i=(a=r.attr.name)==null?void 0:a.split("."))==null?void 0:i.at(-1))??"";return r.attr.text?n=`${n} : ${r.attr.text}`:r.attr.desc&&(n=`${n} : ${r.attr.desc}`),{value:r,children:[],key:r.id,label:n,prefix:r.attr.childCount>0?()=>k("div",r.attr.childCount.toString()):void 0}});return t.forEach(r=>{r.value.attr._id=r.value.id,r.value.attr._pid=r.value.pid,r.parent=t[r.value.pid],r.parent&&(r.value.attr.index=r.parent.children.length,r.parent.children.push(r))}),t.forEach(r=>{let n=r,o=0;for(;n.parent;)o++,n=n.parent;r.value.attr.depth=o,r.isLeaf=r.children.length==0}),t[0]},Gn=(e,t,r)=>{const n=e.value.attr;return n.left<=t&&t<=n.right&&n.top<=r&&r<=n.bottom},Io=$({__name:"DraggableCard",props:{initialValue:{default:()=>({})}},setup(e){const t=e,r=t.initialValue.left!==void 0,n=t.initialValue.top!==void 0,o=bo({x:(r?t.initialValue.left:t.initialValue.right)??0,y:(n?t.initialValue.top:t.initialValue.bottom)??0}),a=B(()=>{const p=r?`left:${o.x}px;`:`right:${o.x}px;`,h=n?`top:${o.y}px;`:`bottom:${o.y}px;`;return p+h});let i=!1;const s=()=>{i=!0},d=p=>{i&&(o.x+=r?p.movementX:-p.movementX,o.y+=n?p.movementY:-p.movementY)},c=()=>{i=!1},f=Pe();window.addEventListener("pointermove",d),Ln(()=>{window.removeEventListener("pointermove",d)}),Et(f,(p,h)=>{p&&(p.addEventListener("pointerdown",s),p.addEventListener("pointerup",c)),h&&(h.removeEventListener("pointerdown",s),h.removeEventListener("pointerup",c))}),Ln(()=>{f.value&&(f.value.removeEventListener("pointerdown",s),f.value.removeEventListener("pointerup",c))});const v=p=>{p instanceof HTMLElement?f.value=p:f.value=void 0};return(p,h)=>(ee(),ve(Xo,{to:"body"},[we("div",{fixed:"",style:ko([p.$attrs.style,a.value]),class:Go(p.$attrs.class)},[mo(p.$slots,"default",{onRef:v})],6)]))}}),xi=["onClick"],bi=$({__name:"AttrCard",props:{focusNode:{}},setup(e){const t=e,r=B(()=>Object.entries(t.focusNode.value.attr).map(([n,o])=>(o=hi(o),{name:n,value:o})));return(n,o)=>(ee(),ve(Io,{"initial-value":{top:90,right:10}},{default:C(({onRef:a})=>[R(S(No),{size:"small",striped:"","single-line":!1,class:"gkd_code"},{default:C(()=>[we("thead",{"cursor-move":"",ref:a},[R(S(zt),null,{default:C(()=>[R(S(He),null,{default:C(()=>[V(" Name ")]),_:1}),R(S(He),null,{default:C(()=>[V(" Value ")]),_:1})]),_:1})],512),R(S(Ro),null,{default:C(()=>[(ee(!0),lt(Sn,null,wn(r.value,i=>(ee(),ve(S(zt),{key:i.name},{default:C(()=>[R(S(Ge),null,{default:C(()=>[we("span",{onClick:s=>S(Cn)(`[${i.name}=${i.value}]`)},Ie(i.name),9,xi)]),_:2},1024),R(S(Ge),null,{default:C(()=>[R(S(jt),{style:{width:"250px"}},{default:C(()=>[V(Ie(i.value),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:2},1024)]),_:1}))}}),mi={flex:"","flex-col":"",relative:"","h-full":""},ki=["src"],wi=$({__name:"ScreenshotCard",props:{url:{},node:{},focusNode:{},skipKeys:{default:()=>[]}},emits:["update:focusNode"],setup(e,{emit:t}){const r=e,n=q();Me(async()=>{n.value=await pi(r.url)});const o=q();Me(()=>{if(!r.node)return;const i=o.value,s=i==null?void 0:i.target;if(!i||!s||!(s instanceof HTMLImageElement))return;const d=s.getBoundingClientRect(),c=(i.clientX-d.left)/s.offsetWidth*s.naturalWidth,f=(i.clientY-d.top)/s.offsetHeight*s.naturalHeight;for(const v of gi(r.node,r.skipKeys))if(Gn(v,c,f)&&(v.children.length==0||v.children.every(p=>!Gn(p,c,f)))){t("update:focusNode",v);return}});const a=B(()=>{const i=n.value;if(!i||!r.focusNode)return"";const s=r.focusNode.value.attr;return{left:`calc(${100*s.left/i.width+"%"} - 1px)`,top:`calc(${100*s.top/i.height+"%"} - 1px)`,width:100*(s.right-s.left)/i.width+"%",height:100*(s.bottom-s.top)/i.height+"%"}});return(i,s)=>(ee(),lt("div",mi,[we("img",{src:i.url,onClick:s[0]||(s[0]=d=>o.value=d),"h-full":"","cursor-crosshair":""},null,8,ki),we("div",{style:ko(a.value),absolute:"","pointer-events-none":"","transition-all-300":"","b-1px":"","b-red":"","b-solid":""},null,4)]))}});class Si{constructor(t,r,n){this.name=t,this.operator=r,this.value=n}match(t){return this.operator.compare(t.attr(this.name),this.value)}toString(){const t=typeof this.value=="string"?`'${this.value.replaceAll("'","\\'")}'`:this.value;return`[${this.name}${this.operator.toString()}${t}]`}}class ue{constructor(t,r=(n,o)=>n===o){this.key=t,this.compare=r}toString(){return this.key}static allSubClasses=[]}const Ht=e=>new ue("!"+e.key,(...t)=>!e.compare(...t)),Eo=new ue("="),_i=Ht(Eo),Ao=new ue("^=",(e,t)=>{if(typeof e=="string"&&typeof t=="string")return e.startsWith(t)}),Ci=Ht(Ao),Do=new ue("*=",(e,t)=>{if(typeof e=="string"&&typeof t=="string")return e.includes(t)}),Ni=Ht(Do),Fo=new ue("$=",(e,t)=>{if(typeof e=="string"&&typeof t=="string")return e.endsWith(t)}),Ri=Ht(Fo),Oi=new ue("<",(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e<t}),Pi=new ue("<=",(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e<=t}),Mi=new ue(">",(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e>t}),Ii=new ue(">=",(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e>=t});ue.allSubClasses=[Eo,_i,Ao,Ci,Do,Ni,Fo,Ri,Oi,Pi,Mi,Ii].sort((e,t)=>t.key.length-e.key.length);class Se{constructor(t,r){this.key=t,this.traversal=r}static allSubClasses=[];static Ancestor;toString(){return this.key}}const Ei=new Se("+",(e,t)=>t!==void 0?e.getBeforeBrother(t):e.beforeBrothers),Ai=new Se("-",(e,t)=>t!==void 0?e.getAfterBrother(t):e.afterBrothers),Bo=new Se(">",(e,t)=>t!==void 0?e.getAncestor(t):e.ancestors),Di=new Se("<",(e,t)=>t!==void 0?e.getChild(t):e.children);Se.allSubClasses=[Ei,Ai,Bo,Di].sort((e,t)=>t.key.length-e.key.length);Se.Ancestor=Bo;var U={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.All=void 0;var Fi=function(){function e(){}return e.prototype.all=function(t){for(var r=this.iterator.next();!r.done;r=this.iterator.next())if(!t(r.value))return!1;return!0},e}();Gt.All=Fi;var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.Any=void 0;var Bi=function(){function e(){}return e.prototype.any=function(t){if(t==null)return!this.iterator.next().done;for(var r=this.iterator.next();!r.done;r=this.iterator.next())if(t(r.value))return!0;return!1},e}();Xt.Any=Bi;var Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.AsIterable=void 0;var Ti=function(){function e(){}return e.prototype.asIterable=function(){var t,r=this.iterator;return t={},t[Symbol.iterator]=function(){return r},t},e}();Zt.AsIterable=Ti;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.Associate=void 0;var Ki=function(){function e(){}return e.prototype.associate=function(t){for(var r=new Map,n=this.iterator.next();!n.done;n=this.iterator.next()){var o=t(n.value);r.set(o[0],o[1])}return r},e}();Jt.Associate=Ki;var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0});Yt.AssociateBy=void 0;var Li=function(){function e(){}return e.prototype.associateBy=function(t,r){for(var n=typeof t=="function"?t:function(c){return c[t]},o=new Map,a=r??function(c){return c},i=this.iterator.next();!i.done;i=this.iterator.next()){var s=n(i.value),d=a(i.value);o.set(s,d)}return o},e}();Yt.AssociateBy=Li;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.Average=void 0;var qi=function(){function e(){}return e.prototype.average=function(){for(var t=0,r=0,n=this.iterator.next();!n.done;n=this.iterator.next())t+=n.value,r++;return r===0?Number.NaN:t/r},e}();Qt.Average=qi;var er={};Object.defineProperty(er,"__esModule",{value:!0});er.Chunk=void 0;var $i=function(){function e(){}return e.prototype.chunk=function(t){if(t<1)throw new Error("chunkSize must be > 0 but is "+t);for(var r=[],n=0,o=this.iterator.next();!o.done;o=this.iterator.next()){var a=Math.floor(n/t);r[a]==null?r[a]=[o.value]:r[a].push(o.value),n++}return r},e}();er.Chunk=$i;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.Contains=void 0;var ji=function(){function e(){}return e.prototype.contains=function(t){for(var r=this.iterator.next();!r.done;r=this.iterator.next())if(t===r.value)return!0;return!1},e}();tr.Contains=ji;var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.Count=void 0;var zi=function(){function e(){}return e.prototype.count=function(t){var r=0;if(t==null)for(var n=this.iterator.next();!n.done;n=this.iterator.next())r++;else for(var n=this.iterator.next();!n.done;n=this.iterator.next())t(n.value)&&r++;return r},e}();rr.Count=zi;var yt={},Xn;function Wi(){if(Xn)return yt;Xn=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.Distinct=void 0;var e=re(),t=function(){function n(o){this.iterator=o,this.set=new Set}return n.prototype.next=function(o){for(var a=this.iterator.next();!a.done;a=this.iterator.next()){var i=this.set.size;if(this.set.add(a.value),this.set.size>i)return{done:!1,value:a.value}}return this.set.clear(),{done:!0,value:void 0}},n}(),r=function(){function n(){}return n.prototype.distinct=function(){return(0,e.createSequence)(new t(this.iterator))},n}();return yt.Distinct=r,yt}var xt={},Zn;function Ui(){if(Zn)return xt;Zn=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.DistinctBy=void 0;var e=re(),t=function(){function n(o,a){this.iterator=o,this.selector=a,this.set=new Set}return n.prototype.next=function(o){for(var a=this.iterator.next();!a.done;a=this.iterator.next()){var i=this.selector(a.value),s=this.set.size;if(this.set.add(i),this.set.size>s)return{done:!1,value:a.value}}return this.set.clear(),{done:!0,value:void 0}},n}(),r=function(){function n(){}return n.prototype.distinctBy=function(o){return(0,e.createSequence)(new t(this.iterator,o))},n}();return xt.DistinctBy=r,xt}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.Drop=void 0;var Vi=function(){function e(){}return e.prototype.drop=function(t){return this.withIndex().dropWhile(function(r){return r.index<t}).map(function(r){return r.value})},e}();nr.Drop=Vi;var bt={},Jn;function Hi(){if(Jn)return bt;Jn=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.DropWhile=void 0;var e=re(),t=function(){function n(o,a){this.iterator=o,this.predicate=a,this.dropping=!0}return n.prototype.next=function(o){for(var a=this.iterator.next();!a.done;a=this.iterator.next()){if(!this.dropping)return{done:!1,value:a.value};var i=this.predicate(a.value);if(!i)return this.dropping=!1,{done:!1,value:a.value}}return{done:!0,value:void 0}},n}(),r=function(){function n(){}return n.prototype.dropWhile=function(o){return(0,e.createSequence)(new t(this.iterator,o))},n}();return bt.DropWhile=r,bt}var or={};Object.defineProperty(or,"__esModule",{value:!0});or.ElementAt=void 0;var Gi=function(){function e(){}return e.prototype.elementAt=function(t){for(var r=0,n=this.iterator.next();!n.done;n=this.iterator.next()){if(r===t)return n.value;r++}throw new Error("Index out of bounds: "+t)},e}();or.ElementAt=Gi;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.ElementAtOrElse=void 0;var Xi=function(){function e(){}return e.prototype.elementAtOrElse=function(t,r){for(var n=0,o=this.iterator.next();!o.done;o=this.iterator.next()){if(n===t)return o.value;n++}return r(t)},e}();ar.ElementAtOrElse=Xi;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.ElementAtOrNull=void 0;var Zi=function(){function e(){}return e.prototype.elementAtOrNull=function(t){for(var r=0,n=this.iterator.next();!n.done;n=this.iterator.next()){if(r===t)return n.value;r++}return null},e}();ir.ElementAtOrNull=Zi;var mt={},Yn;function Ji(){if(Yn)return mt;Yn=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.Filter=void 0;var e=re(),t=function(){function n(o,a){this.predicate=o,this.iterator=a}return n.prototype.next=function(o){for(var a=this.iterator.next();!a.done;a=this.iterator.next())if(this.predicate(a.value))return{done:!1,value:a.value};return{done:!0,value:void 0}},n}(),r=function(){function n(){}return n.prototype.filter=function(o){return(0,e.createSequence)(new t(o,this.iterator))},n}();return mt.Filter=r,mt}var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.FilterIndexed=void 0;var Yi=function(){function e(){}return e.prototype.filterIndexed=function(t){return this.withIndex().filter(function(r){return t(r.index,r.value)}).map(function(r){return r.value})},e}();lr.FilterIndexed=Yi;var sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.FilterNot=void 0;var Qi=function(){function e(){}return e.prototype.filterNot=function(t){return this.filter(function(r){return!t(r)})},e}();sr.FilterNot=Qi;var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.FilterNotNull=void 0;var el=function(){function e(){}return e.prototype.filterNotNull=function(){return this.filter(function(t){return t!==null})},e}();dr.FilterNotNull=el;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.First=void 0;var tl=function(){function e(){}return e.prototype.first=function(t){if(t!=null)return this.filter(t).first();var r=this.iterator.next();if(r.done)throw new Error("No such element");return r.value},e}();ur.First=tl;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.FirstOrNull=void 0;var rl=function(){function e(){}return e.prototype.firstOrNull=function(t){if(t!=null)return this.filter(t).firstOrNull();var r=this.iterator.next();return r.done?null:r.value},e.prototype.find=function(t){return this.firstOrNull(t)},e}();cr.FirstOrNull=rl;var kt={},Qn;function nl(){if(Qn)return kt;Qn=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.FlatMap=void 0;var e=re(),t=function(){function n(o,a){this.transform=o,this.iterator=a}return n.prototype.next=function(o){if(this.current!=null){var a=this.current.next();if(!a.done)return a}var i=this.iterator.next();if(!i.done){var s=this.transform(i.value);return this.current=s.iterator,this.next()}return{done:!0,value:void 0}},n}(),r=function(){function n(){}return n.prototype.flatMap=function(o){return(0,e.createSequence)(new t(o,this.iterator))},n}();return kt.FlatMap=r,kt}var wt={},eo;function ol(){if(eo)return wt;eo=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.Flatten=void 0;var e=re(),t=function(){function r(){}return r.prototype.flatten=function(){return this.flatMap(function(n){return(0,e.isSequence)(n)?n:(0,e.asSequence)(n)})},r}();return wt.Flatten=t,wt}var fr={};Object.defineProperty(fr,"__esModule",{value:!0});fr.Fold=void 0;var al=function(){function e(){}return e.prototype.fold=function(t,r){for(var n=t,o=this.iterator.next();!o.done;o=this.iterator.next())n=r(n,o.value);return n},e}();fr.Fold=al;var vr={};Object.defineProperty(vr,"__esModule",{value:!0});vr.FoldIndexed=void 0;var il=function(){function e(){}return e.prototype.foldIndexed=function(t,r){for(var n=t,o=0,a=this.iterator.next();!a.done;a=this.iterator.next())n=r(o,n,a.value),o++;return n},e}();vr.FoldIndexed=il;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.ForEach=void 0;var ll=function(){function e(){}return e.prototype.forEach=function(t){for(var r=this.iterator.next();!r.done;r=this.iterator.next())t(r.value)},e}();hr.ForEach=ll;var pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.ForEachIndexed=void 0;var sl=function(){function e(){}return e.prototype.forEachIndexed=function(t){this.withIndex().forEach(function(r){return t(r.index,r.value)})},e}();pr.ForEachIndexed=sl;var gr={};Object.defineProperty(gr,"__esModule",{value:!0});gr.GroupBy=void 0;var dl=function(){function e(){}return e.prototype.groupBy=function(t){for(var r=new Map,n=this.iterator.next();!n.done;n=this.iterator.next()){var o=t(n.value),a=r.get(o);a==null?r.set(o,[n.value]):a.push(n.value)}return r},e}();gr.GroupBy=dl;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.IndexOf=void 0;var ul=function(){function e(){}return e.prototype.indexOf=function(t){for(var r=0,n=this.iterator.next();!n.done;n=this.iterator.next()){if(t===n.value)return r;r++}return-1},e}();yr.IndexOf=ul;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.IndexOfFirst=void 0;var cl=function(){function e(){}return e.prototype.indexOfFirst=function(t){for(var r=0,n=this.iterator.next();!n.done;n=this.iterator.next()){if(t(n.value))return r;r++}return-1},e}();xr.IndexOfFirst=cl;var br={};Object.defineProperty(br,"__esModule",{value:!0});br.IndexOfLast=void 0;var fl=function(){function e(){}return e.prototype.indexOfLast=function(t){for(var r=0,n=-1,o=this.iterator.next();!o.done;o=this.iterator.next())t(o.value)&&(n=r),r++;return n},e}();br.IndexOfLast=fl;var mr={};Object.defineProperty(mr,"__esModule",{value:!0});mr.JoinToString=void 0;var Oe={value:"",separator:", ",prefix:"",postfix:"",limit:-1,truncated:"...",transform:void 0},vl=function(){function e(){}return e.prototype.joinToString=function(t){t===void 0&&(t=Oe);for(var r=t.value,n=r===void 0?Oe.value:r,o=t.separator,a=o===void 0?Oe.separator:o,i=t.prefix,s=i===void 0?Oe.prefix:i,d=t.postfix,c=d===void 0?Oe.postfix:d,f=t.limit,v=f===void 0?Oe.limit:f,p=t.truncated,h=p===void 0?Oe.truncated:p,w=t.transform,_=w===void 0?Oe.transform:w,m="".concat(n).concat(s),N=0,O=this.iterator.next();!O.done&&(N++,N>1&&(m+=a),v<0||N<=v);O=this.iterator.next())m+=_!=null?_(O.value):String(O.value);return v>=0&&N>v&&(m+=h),m+=c,m},e.prototype.joinTo=function(t){return t===void 0&&(t=Oe),this.joinToString(t)},e}();mr.JoinToString=vl;var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.Last=void 0;var hl=function(){function e(){}return e.prototype.last=function(t){if(t!=null)return this.filter(t).last();for(var r,n=!0,o=this.iterator.next();!o.done;o=this.iterator.next())r=o.value,n=!1;if(n)throw new Error("No such element");return r},e}();kr.Last=hl;var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.LastOrNull=void 0;var pl=function(){function e(){}return e.prototype.lastOrNull=function(t){if(t!=null)return this.filter(t).lastOrNull();for(var r=null,n=this.iterator.next();!n.done;n=this.iterator.next())r=n.value;return r},e.prototype.findLast=function(t){return this.lastOrNull(t)},e}();wr.LastOrNull=pl;var St={},to;function gl(){if(to)return St;to=1,Object.defineProperty(St,"__esModule",{value:!0}),St.Map=void 0;var e=re(),t=function(){function n(o,a){this.transform=o,this.iterator=a}return n.prototype.next=function(o){var a=this.iterator.next();return a.done?{done:!0,value:void 0}:{done:!1,value:this.transform(a.value)}},n}(),r=function(){function n(){}return n.prototype.map=function(o){return(0,e.createSequence)(new t(o,this.iterator))},n}();return St.Map=r,St}var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});Sr.MapIndexed=void 0;var yl=function(){function e(){}return e.prototype.mapIndexed=function(t){return this.withIndex().map(function(r){return t(r.index,r.value)})},e}();Sr.MapIndexed=yl;var _t={},ro;function xl(){if(ro)return _t;ro=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.MapNotNull=void 0;var e=re(),t=function(){function r(){}return r.prototype.mapNotNull=function(n){return this.flatMap(function(o){var a=n(o);return a!==null?(0,e.sequenceOf)(a):(0,e.emptySequence)()})},r}();return _t.MapNotNull=t,_t}var _r={};Object.defineProperty(_r,"__esModule",{value:!0});_r.Max=void 0;var bl=function(){function e(){}return e.prototype.max=function(){for(var t=null,r=this.iterator.next();!r.done;r=this.iterator.next())(t==null||r.value>t)&&(t=r.value);return t},e}();_r.Max=bl;var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.MaxBy=void 0;var ml=function(){function e(){}return e.prototype.maxBy=function(t){for(var r=null,n=null,o=this.iterator.next();!o.done;o=this.iterator.next()){var a=t(o.value);(n==null||a>n)&&(n=a,r=o.value)}return r},e}();Cr.MaxBy=ml;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.MaxWith=void 0;var kl=function(){function e(){}return e.prototype.maxWith=function(t){for(var r=null,n=this.iterator.next();!n.done;n=this.iterator.next())(r==null||t(n.value,r)>0)&&(r=n.value);return r},e}();Nr.MaxWith=kl;var Ct={},no;function wl(){if(no)return Ct;no=1;var e=jn&&jn.__spreadArray||function(n,o,a){if(a||arguments.length===2)for(var i=0,s=o.length,d;i<s;i++)(d||!(i in o))&&(d||(d=Array.prototype.slice.call(o,0,i)),d[i]=o[i]);return n.concat(d||Array.prototype.slice.call(o))};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.Merge=void 0;var t=re(),r=function(){function n(){}return n.prototype.merge=function(o,a,i){i===void 0&&(i=!1);var s=(0,t.isSequence)(o)?o.toArray():(0,t.asSequence)(o).toArray(),d=this.toArray(),c=d.map(function(f){var v=a(f),p=(0,t.asSequence)(s).find(function(h){return a(h)===v});return p!=null?(s=s.filter(function(h){return h!==p}),p):f});return i?(0,t.asSequence)(e(e([],s,!0),c,!0)):(0,t.asSequence)(e(e([],c,!0),s,!0))},n}();return Ct.Merge=r,Ct}var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.Min=void 0;var Sl=function(){function e(){}return e.prototype.min=function(){for(var t=null,r=this.iterator.next();!r.done;r=this.iterator.next())(t==null||r.value<t)&&(t=r.value);return t},e}();Rr.Min=Sl;var Or={};Object.defineProperty(Or,"__esModule",{value:!0});Or.MinBy=void 0;var _l=function(){function e(){}return e.prototype.minBy=function(t){for(var r=null,n=null,o=this.iterator.next();!o.done;o=this.iterator.next()){var a=t(o.value);(n==null||a<n)&&(n=a,r=o.value)}return r},e}();Or.MinBy=_l;var Nt={},oo;function Cl(){if(oo)return Nt;oo=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.Minus=void 0;var e=re(),t=function(){function r(){}return r.prototype.minus=function(n){if((0,e.isSequence)(n)){var o=n.toArray();return this.filter(function(a){return o.indexOf(a)<0})}else return n instanceof Array?this.filter(function(a){return n.indexOf(a)<0}):this.filter(function(a){return a!==n})},r}();return Nt.Minus=t,Nt}var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.MinWith=void 0;var Nl=function(){function e(){}return e.prototype.minWith=function(t){for(var r=null,n=this.iterator.next();!n.done;n=this.iterator.next())(r==null||t(n.value,r)<0)&&(r=n.value);return r},e}();Pr.MinWith=Nl;var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.None=void 0;var Rl=function(){function e(){}return e.prototype.none=function(t){var r,n;if(t==null)return(n=(r=this.iterator.next())===null||r===void 0?void 0:r.done)!==null&&n!==void 0?n:!1;for(var o=this.iterator.next();!o.done;o=this.iterator.next())if(t(o.value))return!1;return!0},e}();Mr.None=Rl;var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.OnEach=void 0;var Ol=function(){function e(){}return e.prototype.onEach=function(t){return this.map(function(r){return t(r),r})},e}();Ir.OnEach=Ol;var Er={};Object.defineProperty(Er,"__esModule",{value:!0});Er.Partition=void 0;var Pl=function(){function e(){}return e.prototype.partition=function(t){for(var r=[],n=[],o=this.iterator.next();!o.done;o=this.iterator.next())t(o.value)?r.push(o.value):n.push(o.value);return{true:r,false:n}},e}();Er.Partition=Pl;var Rt={},ao;function Ml(){if(ao)return Rt;ao=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.Plus=void 0;var e=re(),t=function(){function n(o,a){this.first=o,this.second=a}return n.prototype.next=function(o){var a=this.first.next();if(!a.done)return{done:!1,value:a.value};var i=this.second.next();return i.done?{done:!0,value:void 0}:{done:!1,value:i.value}},n}(),r=function(){function n(){}return n.prototype.plus=function(o){if((0,e.isSequence)(o))return(0,e.createSequence)(new t(this.iterator,o.iterator));if(o instanceof Array){var a=o[Symbol.iterator]();return(0,e.createSequence)(new t(this.iterator,a))}else{var a=[o][Symbol.iterator]();return(0,e.createSequence)(new t(this.iterator,a))}},n}();return Rt.Plus=r,Rt}var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.Reduce=void 0;var Il=function(){function e(){}return e.prototype.reduce=function(t){var r=this.iterator.next();if(r.done)throw new Error("Cannot reduce empty sequence");for(var n=r.value,o=this.iterator.next();!o.done;o=this.iterator.next())n=t(n,o.value);return n},e}();Ar.Reduce=Il;var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ReduceIndexed=void 0;var El=function(){function e(){}return e.prototype.reduceIndexed=function(t){var r=this.iterator.next();if(r.done)throw new Error("Cannot reduce empty sequence");for(var n=1,o=r.value,a=this.iterator.next();!a.done;a=this.iterator.next())o=t(n,o,a.value),n++;return o},e}();Dr.ReduceIndexed=El;var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.Reverse=void 0;var Al=function(){function e(){}return e.prototype.reverse=function(){return this.withIndex().sortedByDescending(function(t){return t.index}).map(function(t){return t.value})},e}();Fr.Reverse=Al;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.Single=void 0;var Dl=function(){function e(){}return e.prototype.single=function(t){if(t!=null)return this.filter(t).single();var r=this.iterator.next();if(r.done)throw new Error("No such element");if(!this.iterator.next().done)throw new Error("Expect single element");return r.value},e}();Br.Single=Dl;var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.SingleOrNull=void 0;var Fl=function(){function e(){}return e.prototype.singleOrNull=function(t){if(t!=null)return this.filter(t).singleOrNull();var r=this.iterator.next();return r.done||!this.iterator.next().done?null:r.value},e}();Tr.SingleOrNull=Fl;var Ot={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});function he(e){return Object.assign(e,{reversed:function(){return he(function(t,r){return e(t,r)*-1})},then:function(t){return he(function(r,n){var o=e(r,n);return o!==0?o:t(r,n)})},thenDescending:function(t){return this.then(he(t).reversed())},thenBy:function(t){var r=Wt(t);return this.then(function(n,o){return st(r(n),r(o))})},thenByDescending:function(t){var r=Wt(t);return this.then(he(function(n,o){return st(r(n),r(o))}).reversed())}})}function Bl(e){var t=Wt(e);return he(function(r,n){return st(t(r),t(n))})}function Tl(e){var t=Wt(e);return he(function(r,n){return st(t(n),t(r))})}function Wt(e){return typeof e=="function"?e:function(t){return t[e]}}function st(e,t){return e<t?-1:e>t?1:0}function Kl(){return he(st)}function Ll(){return he(st).reversed()}function ql(){return he(function(e,t){return e===null?1:t===null?-1:0})}function $l(){return he(function(e,t){return e===null?-1:t===null?1:0})}function jl(){return{compare:he,compareBy:Bl,compareByDescending:Tl,naturalOrder:Kl,reverseOrder:Ll,nullsFirst:$l,nullsLast:ql}}Pn.default=jl;var io;function zl(){if(io)return Ot;io=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.Sorted=void 0;var e=re(),t=Pn,r=function(){function n(){}return n.prototype.sorted=function(o){for(var a=[],i=this.iterator.next();!i.done;i=this.iterator.next())a.push(i.value);if(o==null)a.sort();else{var s=(0,t.default)(),d=o(s);a.sort(d)}var c=a[Symbol.iterator]();return(0,e.createSequence)(c)},n}();return Ot.Sorted=r,Ot}var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.SortedBy=void 0;var Wl=function(){function e(){}return e.prototype.sortedBy=function(t){return this.sorted(function(r){return r.compareBy(t)})},e}();Kr.SortedBy=Wl;var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.SortedByDescending=void 0;var Ul=function(){function e(){}return e.prototype.sortedByDescending=function(t){return this.sorted(function(r){return r.compareByDescending(t)})},e}();Lr.SortedByDescending=Ul;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.SortedDescending=void 0;var Vl=function(){function e(){}return e.prototype.sortedDescending=function(){return this.sorted(function(t){return t.reverseOrder()})},e}();qr.SortedDescending=Vl;var $r={};Object.defineProperty($r,"__esModule",{value:!0});$r.SortedWith=void 0;var Hl=function(){function e(){}return e.prototype.sortedWith=function(t){return this.sorted(function(r){return r.compare(t)})},e}();$r.SortedWith=Hl;var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.Sum=void 0;var Gl=function(){function e(){}return e.prototype.sum=function(){for(var t=0,r=this.iterator.next();!r.done;r=this.iterator.next())t+=r.value;return t},e}();jr.Sum=Gl;var zr={};Object.defineProperty(zr,"__esModule",{value:!0});zr.SumBy=void 0;var Xl=function(){function e(){}return e.prototype.sumBy=function(t){for(var r=0,n=this.iterator.next();!n.done;n=this.iterator.next())r+=t(n.value);return r},e}();zr.SumBy=Xl;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.Take=void 0;var Zl=function(){function e(){}return e.prototype.take=function(t){return this.withIndex().takeWhile(function(r){return r.index<t}).map(function(r){return r.value})},e}();Wr.Take=Zl;var Pt={},lo;function Jl(){if(lo)return Pt;lo=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.TakeWhile=void 0;var e=re(),t=function(){function n(o,a){this.iterator=o,this.predicate=a}return n.prototype.next=function(o){var a=this.iterator.next();if(!a.done){var i=this.predicate(a.value);if(i)return{done:!1,value:a.value}}return{done:!0,value:void 0}},n}(),r=function(){function n(){}return n.prototype.takeWhile=function(o){return(0,e.createSequence)(new t(this.iterator,o))},n}();return Pt.TakeWhile=r,Pt}var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.ToArray=void 0;var Yl=function(){function e(){}return e.prototype.toArray=function(t){for(var r=t||[],n=this.iterator.next();!n.done;n=this.iterator.next())r.push(n.value);return r},e.prototype.toList=function(t){return this.toArray(t)},e}();Ur.ToArray=Yl;var Vr={};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.ToMap=void 0;var Ql=function(){function e(){}return e.prototype.toMap=function(t){for(var r=t||new Map,n=this.iterator.next();!n.done;n=this.iterator.next()){var o=n.value,a=o[0],i=o[1];r.set(a,i)}return r},e}();Vr.ToMap=Ql;var Hr={};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.ToSet=void 0;var es=function(){function e(){}return e.prototype.toSet=function(t){for(var r=t||new Set,n=this.iterator.next();!n.done;n=this.iterator.next())r.add(n.value);return r},e}();Hr.ToSet=es;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.Unzip=void 0;var ts=function(){function e(){}return e.prototype.unzip=function(){for(var t=[],r=[],n=this.iterator.next();!n.done;n=this.iterator.next()){var o=n.value,a=o[0],i=o[1];t.push(a),r.push(i)}return[t,r]},e}();Gr.Unzip=ts;var Mt={},so;function rs(){if(so)return Mt;so=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.WithIndex=void 0;var e=re(),t=function(){function n(o){this.iterator=o,this.index=-1}return n.prototype.next=function(o){var a=this.iterator.next();return a.done?{done:!0,value:void 0}:(this.index++,{done:!1,value:{index:this.index,value:a.value}})},n}(),r=function(){function n(){}return n.prototype.withIndex=function(){return(0,e.createSequence)(new t(this.iterator))},n}();return Mt.WithIndex=r,Mt}var It={},uo;function ns(){if(uo)return It;uo=1,Object.defineProperty(It,"__esModule",{value:!0}),It.Zip=void 0;var e=re(),t=function(){function n(o,a){this.iterator1=o,this.iterator2=a}return n.prototype.next=function(o){var a=this.iterator1.next(),i=this.iterator2.next();return a.done||i.done?{done:!0,value:void 0}:{done:!1,value:[a.value,i.value]}},n}(),r=function(){function n(){}return n.prototype.zip=function(o){return(0,e.createSequence)(new t(this.iterator,o.iterator))},n}();return It.Zip=r,It}var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});var os=function(){function e(t){this.nextFunction=t}return e.prototype.next=function(t){var r=this.nextFunction();return{done:r==null,value:r}},e}();Mn.default=os;var In={};Object.defineProperty(In,"__esModule",{value:!0});var as=function(){function e(t,r){this.seed=t,this.nextFunction=r}return e.prototype.next=function(t){if(this.prevItem==null)return this.prevItem=this.seed,{done:!1,value:this.seed};var r=this.nextFunction(this.prevItem);return r==null?{done:!0,value:void 0}:(this.prevItem=r,{done:!1,value:r})},e}();In.default=as;var co;function re(){if(co)return U;co=1,Object.defineProperty(U,"__esModule",{value:!0}),U.range=U.generateSequence=U.extendSequence=U.isSequence=U.createSequence=U.asSequence=U.emptySequence=U.sequenceOf=void 0;var e=Gt,t=Xt,r=Zt,n=Jt,o=Yt,a=Qt,i=er,s=tr,d=rr,c=Wi(),f=Ui(),v=nr,p=Hi(),h=or,w=ar,_=ir,m=Ji(),N=lr,O=sr,j=dr,D=ur,G=cr,oe=nl(),pe=ol(),se=fr,_e=vr,de=hr,ge=pr,Ee=gr,$e=yr,ie=xr,ye=br,xe=mr,ut=kr,y=wr,I=gl(),L=Sr,Ae=xl(),Je=_r,Ye=Cr,Zr=Nr,Bt=wl(),je=Rr,Qe=Or,et=Cl(),tt=Pr,rt=Mr,Jr=Ir,ct=Er,ft=Ml(),ze=Ar,Tt=Dr,De=Fr,be=Br,Yr=Tr,Qr=zl(),nt=Kr,en=Lr,ae=qr,Fe=$r,Kt=jr,tn=zr,vt=Wr,rn=Jl(),nn=Ur,on=Vr,an=Hr,ln=Gr,sn=rs(),We=ns(),dn=Mn,Ce=In,ce=function(){function E(W){this.iterator=W}return E}();ht(ce,[e.All,t.Any,r.AsIterable,n.Associate,o.AssociateBy,a.Average,i.Chunk,s.Contains,d.Count,c.Distinct,f.DistinctBy,v.Drop,p.DropWhile,h.ElementAt,w.ElementAtOrElse,_.ElementAtOrNull,m.Filter,N.FilterIndexed,O.FilterNot,j.FilterNotNull,D.First,G.FirstOrNull,oe.FlatMap,pe.Flatten,se.Fold,_e.FoldIndexed,de.ForEach,ge.ForEachIndexed,Ee.GroupBy,$e.IndexOf,ie.IndexOfFirst,ye.IndexOfLast,xe.JoinToString,ut.Last,y.LastOrNull,I.Map,L.MapIndexed,Ae.MapNotNull,Je.Max,Ye.MaxBy,Zr.MaxWith,Bt.Merge,je.Min,Qe.MinBy,et.Minus,tt.MinWith,rt.None,Jr.OnEach,ct.Partition,ft.Plus,ze.Reduce,Tt.ReduceIndexed,De.Reverse,be.Single,Yr.SingleOrNull,Qr.Sorted,nt.SortedBy,en.SortedByDescending,ae.SortedDescending,Fe.SortedWith,Kt.Sum,tn.SumBy,vt.Take,rn.TakeWhile,nn.ToArray,on.ToMap,an.ToSet,ln.Unzip,sn.WithIndex,We.Zip]);function ht(E,W){W.forEach(function(fe){Object.getOwnPropertyNames(fe.prototype).forEach(function(Be){E.prototype[Be]=fe.prototype[Be]})})}function un(){for(var E=[],W=0;W<arguments.length;W++)E[W]=arguments[W];return Ue(E)}U.sequenceOf=un;function pt(){return Ue([])}U.emptySequence=pt;function Ue(E){if(E===null)throw new Error("Cannot create sequence for input: null");if(E===void 0)throw new Error("Cannot create sequence for input: undefined");if(E[Symbol.iterator]==null)throw new Error("Cannot create sequence for non-iterable input: "+E);var W=E[Symbol.iterator]();return ot(W)}U.asSequence=Ue;function ot(E){return new ce(E)}U.createSequence=ot;function cn(E){return E instanceof ce}U.isSequence=cn;function fn(E){ht(ce,[E])}U.extendSequence=fn;function Lt(E,W){if(typeof E=="function"&&W==null)return ot(new dn.default(E));var fe=typeof E=="function"?E():E;return fe!=null?ot(new Ce.default(fe,W)):pt()}U.generateSequence=Lt;function vn(E,W,fe){if(fe===void 0&&(fe=1),E>W)throw new Error("start [".concat(E,"] must be lower then endInclusive [").concat(W,"]"));var Be=E;return Lt(function(){try{return Be<=W?Be:void 0}finally{Be+=fe}})}return U.range=vn,U}var Le=re();class Dt{constructor(t,r){this.first=t,this.second=r}get destruction(){return[this.first,this.second]}}const En=e=>{let t;return(...r)=>(t||(t=e()),t(...r))};class Xr{constructor(t=0,r=1){this.a=t,this.b=r}toString(){const{a:t,b:r}=this;if(t==0&&r==0)return"0";if(t==1&&r==1)return"(n+1)";if(r==0)return t==1?"n":t>0?`${t}n`:`(${t}n)`;if(t==0)return r==1?"":r>0?r.toString():`(${r})`;const n=r>=0?"+":"";return`(${t}n${n}${r})`}get b1(){return this.b-1}get isConstant(){return this.a==0}traversal=En(()=>{const{a:t,b:r,b1:n}=this;return t<=0&&r<=0?()=>Le.emptySequence():o=>o.filterIndexed(a=>(a-n)%t==0&&(a-n)/t>0)})}class To{constructor(t=Se.Ancestor,r=new Xr){this.operator=t,this.polynomialExpression=r}toString(){const{operator:t,polynomialExpression:r}=this;return t==Se.Ancestor&&r.a==1&&r.b==0?"":t.toString()+r.toString()}traversal=En(()=>{const{polynomialExpression:t,operator:r}=this;return t.isConstant?n=>Le.createSequence(function*(){const o=r.traversal(n,t.b1);o!=null&&(yield o)}()):n=>t.traversal(r.traversal(n))})}class is{constructor(t,r){this.connectSegment=t,this.to=r}toString(){const{connectSegment:t,to:r}=this;return(r.toString()+" "+t.toString()).trim()}match(t,r=[]){const{connectSegment:n,to:o}=this;for(const a of n.traversal(t).asIterable()){if(a==null)continue;const i=o.match(a,r);if(i)return i}return null}}class ls{constructor(t,r,n){this.tracked=t,this.name=r,this.expressions=n}toString(){const{tracked:t,name:r,expressions:n}=this;return(t?"@":"")+r+n.join("")}matchName=En(()=>{const{name:t}=this;return t.trim().length==0||t=="*"?()=>!0:r=>{const n=r.name;return n!=null&&(n===t||n.endsWith(t)&&n[n.length-t.length-1]==".")}});matchExpressions(t){return this.expressions.every(r=>r.match(t))}match(t){return this.matchName(t)&&this.matchExpressions(t)}}class fo{constructor(t,r){this.propertySegment=t,this.to=r}toString(){const{propertySegment:t,to:r}=this;return(r!=null?r.toString()+" ":"")+t.toString()}match(t,r=[]){const{propertySegment:n,to:o}=this;return n.match(t)?((n.tracked||r.length==0)&&r.push(t),o==null?r:o.match(t,r)):null}}class A extends Error{constructor(t,r,n){super(`expected ${t} in selector at position ${r}, but got ${n[r]??"null"}`),this.expectedValue=t,this.position=r,this.source=n}static assert(t,r,n="",o=null){if(r>=t.length||n.length>0&&!n.includes(t[r]))throw new A(o??n,r,t)}static throwError(t,r,n=""){throw new A(n,r,t)}}class ne{constructor(t="",r){this.prefix=t,this.temp=r}invoke(t,r){return this.temp(t,r,this.prefix)}}class H{constructor(t,r=0){this.data=t,this.length=r}}const qe=new ne(` 	\r
`,(e,t,r)=>{let n=t,o="";for(;n<e.length&&r.includes(e[n]);)o+=e[n],n++;return new H(o,n-t)}),vo=new ne(` 	\r
`,(e,t,r)=>(A.assert(e,t,r,"whitespace"),qe.invoke(e,t))),ss=new ne("*1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM_",(e,t,r)=>{let n=t;const o=e[n];if(o&&!r.includes(o))return new H("");A.assert(e,n,r,"*0-9a-zA-Z_");let a=e[n];if(n++,a=="*")return new H(a,n-t);const i="1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM_.";for(;n<e.length&&(a[n-t-1]=="."&&A.assert(e,n,r,"[0-9a-zA-Z_]"),i.includes(e[n]));){a+=e[n];n++}return new H(a,n-t)}),ho=new ne(Se.allSubClasses.map(e=>e.key).join(""),(e,t)=>{const r=Se.allSubClasses.find(n=>e.startsWith(n.key,t))??A.throwError(e,t,"ConnectOperator");return new H(r,r.key.length)}),Xe=new ne("1234567890",(e,t,r)=>{let n=t;A.assert(e,n,r,"number");let o="";for(;r.includes(e[n]);)o+=e[n],n++;return new H(+o,n-t)}),mn=new ne("+-1234567890n",(e,t,r)=>{let n=t;A.assert(e,n,r);const o=(()=>e[n]=="+"?(n++,1):e[n]=="-"?(n++,-1):1)();n+=qe.invoke(e,n).length,A.assert(e,n,Xe.prefix+"n");const a=(()=>{if(Xe.prefix.includes(e[n])){const i=Xe.invoke(e,n);return n+=i.length,i.data}else return 1})()*o;if(n<e.length&&e[n]=="n")if(n++,n<e.length&&e[n]=="^"){n++;const i=Xe.invoke(e,n);return n+=i.length,new H(new Dt(i.data,a),n-t)}else return new H(new Dt(1,a),n-t);else return new H(new Dt(0,a),n-t)}),po=new ne("(0123456789n",(e,t,r)=>{let n=t;A.assert(e,n,r);const o=Array();if(e[n]=="("){for(n++,n+=qe.invoke(e,n).length,A.assert(e,n,mn.prefix);e[n]!=")";){o.length>0&&A.assert(e,n,"+-");const i=mn.invoke(e,n);o.push(i),n+=i.length,n+=qe.invoke(e,n).length,n>=e.length&&A.assert(e,n,")")}n++}else{const i=mn.invoke(e,n);o.push(i),n+=i.length}const a=new Map;return o.forEach(i=>{const[s,d]=i.data.destruction;a.set(s,(a.get(s)??0)+d)}),a.forEach((i,s)=>{s>1&&A.throwError(e,t,"power must be 0 or 1")}),new H(new Xr(a.get(1)??0,a.get(0)??0),n-t)}),go=new ne(ho.prefix,(e,t)=>{let r=t;const n=ho.invoke(e,r);r+=n.length;let o;return r<e.length&&po.prefix.includes(e[r])&&(o=po.invoke(e,r),r+=o.length),new H(new To(n.data,(o==null?void 0:o.data)??new Xr),r-t)}),ds=new ne(ue.allSubClasses.map(e=>e.key).join(""),(e,t)=>{const r=ue.allSubClasses.find(n=>e.startsWith(n.key,t))??A.throwError(e,t,"CompareOperator");return new H(r,r.key.length)}),kn=new ne("`\"'",(e,t,r)=>{let n=t;A.assert(e,n,r);const o=e[n];n++;let a="";for(;e[n]!=o;){if(n==e.length-1){A.assert(e,n,o);break}e[n]=="\\"?(n++,A.assert(e,n),e[n]==o?(a+=e[n],A.assert(e,n+1)):a+="\\"+e[n].toString()):a+=e[n],n++}return n++,new H(a,n-t)}),us=new ne("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",(e,t,r)=>{let n=t;A.assert(e,n,r);let o=e[n].toString();for(n++;n<e.length&&r.includes(e[n]);)o+=e[n],n++;return new H(o,n-t)}),cs=new ne("tfn"+kn.prefix+Xe.prefix,(e,t,r)=>{let n=t;A.assert(e,n,r);const o=(()=>{if(e[n]=="t")return n++,[..."rue"].forEach(a=>{A.assert(e,n,a.toString()),n++}),!0;if(e[n]=="f")return n++,[..."alse"].forEach(a=>{A.assert(e,n,a.toString()),n++}),!1;if(e[n]=="n")return n++,[..."ull"].forEach(a=>{A.assert(e,n,a.toString()),n++}),null;if(kn.prefix.includes(e[n])){const a=kn.invoke(e,n);return n+=a.length,a.data}else if(Xe.prefix.includes(e[n])){const a=Xe.invoke(e,n);return n+=a.length,a.data}else A.throwError(e,n,r)})();return new H(o,n-t)}),fs=new ne("[",(e,t,r)=>{let n=t;A.assert(e,n,r),n++;const o=us.invoke(e,n);n+=o.length;const a=ds.invoke(e,n);n+=a.length;const i=cs.invoke(e,n);return n+=i.length,A.assert(e,n,"]"),n++,new H(new Si(o.data,a.data,i.data),n-t)}),yo=new ne("",(e,t)=>{let r=t,n=!1;e[r]=="@"&&(n=!0,r++);const o=ss.invoke(e,r);r+=o.length;const a=Array();for(;r<e.length&&e[r]=="[";){const i=fs.invoke(e,r);r+=i.length,a.push(i.data)}return o.length==0&&a.length==0&&A.throwError(e,r,"["),new H(new ls(n,o.data,a),r-t)}),vs=new ne("",(e,t)=>{let r=t;r+=qe.invoke(e,r).length;const n=yo.invoke(e,r);r+=n.length;const o=Array();for(;r<e.length&&qe.prefix.includes(e[r]);){r+=vo.invoke(e,r).length;const a=(()=>{if(go.prefix.includes(e[r])){const s=go.invoke(e,r);return r+=s.length,r+=vo.invoke(e,r).length,s.data}else return new To(void 0,new Xr(1,0))})(),i=yo.invoke(e,r);r+=i.length,o.push(new Dt(a,i.data))}return new H(new Dt(n.data,o),r-t)}),hs=new ne("",(e,t)=>(t!=e.length&&A.throwError(e,t,"end"),new H(void 0,0))),ps=e=>{let t=0;t+=qe.invoke(e,t).length;const r=vs.invoke(e,t);t+=r.length,t+=qe.invoke(e,t).length,t+=hs.invoke(e,t).length;const n=r.data,o=Array(),a=Array();o.push(n.first),n.second.forEach(s=>{o.push(s.second),a.push(s.first)});const i=Array(new fo(o[0]));return a.forEach((s,d)=>{const c=new is(s,i.at(-1)),f=new fo(o[d+1],c);i.push(f)}),new An(i.at(-1))};class An{constructor(t){this.propertyWrapper=t,this._toString=t.toString()}_toString;toString(){return this._toString}match(t){const r=this.propertyWrapper.match(t);if(r)return r.at(-1)??t}static parse(t){return ps(t)}}class gs{getChild(t){return this.children.elementAtOrNull(t)??void 0}get ancestors(){const{parent:t}=this;return Le.createSequence(function*(){let r=t;for(;r!=null;)yield r,r=r.parent}())}getAncestor(t){return this.ancestors.elementAtOrNull(t)??void 0}get beforeBrothers(){const t=this,{parent:r}=this;return Le.createSequence(function*(){if(!r)return;const o=r.children.takeWhile(a=>a!=t).toList();o.reverse();for(const a of o)yield a}())}getBeforeBrother(t){return this.beforeBrothers.elementAtOrNull(t)??void 0}get afterBrothers(){const t=this,{parent:r}=this;return Le.createSequence(function*(){if(!r)return;const o=r.children.dropWhile(a=>a!=t).drop(1);for(const a of o.asIterable())yield a}())}getAfterBrother(t){return this.afterBrothers.elementAtOrNull(t)??void 0}get descendants(){const t=[this],r=[];return Le.createSequence(function*(){for(;t.length>0;){const n=t.pop();yield n;for(const o of n.children.asIterable())o&&r.push(o);if(r.length>0)for(r.reverse(),t.push(...r);r.length>0;)r.pop()}}())}querySelector(t){return this.querySelectorAll(t).firstOrNull()??void 0}querySelectorAll(t){typeof t=="string"&&(t=An.parse(t));const r=this;return Le.createSequence(function*(){for(const n of r.descendants.asIterable()){const o=t.match(n);o&&(yield o)}}())}}class Dn extends gs{constructor(t,r){super(),this.value=t,this.parent=r,this._children=t.children.map(n=>new Dn(n,this))}_children;get children(){return Le.asSequence(this._children)}get name(){return this.value.value.attr.name}attr(t){return this.value.value.attr[t]}}const ys={"w-500px":"","bg-white":"","b-1px":"","b-solid":"","b-gray-200":"","rounded-4px":"","p-8px":""},xs={flex:"","m-b-4px":""},bs=we("div",{"p-5px":""},null,-1),ms=we("div",{"p-l-8px":""},null,-1),ks=$({__name:"SearchCard",props:{root:{}},emits:["update:focusNode"],setup(e,{emit:t}){const r=e,n=B(()=>{if(r.root)return new Dn(r.root)}),o=Pe(""),a=bo([]),i=Pa(()=>{if(!n.value||!r.root){ke.error("根节点不存在");return}const d=o.value.trim();if(d)if(s.value){if(a.find(v=>typeof v.selector=="object"&&v.selector.toString()==d)){ke.warning("不可重复选择");return}const c=Ma(()=>An.parse(d),"选择器非法"),f=n.value.querySelectorAll(c).map(v=>v.value).toList();if(f.length==0){ke.success("没有选择到节点");return}ke.success(`选择到 ${f.length} 个节点`),a.push({selector:c,results:f})}else{if(a.find(v=>typeof v.selector=="string"&&v.selector.toString()==d)){ke.warning("不可重复选择");return}const c=[],f=[r.root];for(;f.length>0;){const v=f.pop();v.label.includes(d)&&c.push(v),f.push(...[...v.children].reverse())}if(c.length==0){ke.success("没有搜索到节点");return}ke.success(`搜索到 ${c.length} 个节点`),a.push({selector:d,results:c})}}),s=Pe(!1);return(d,c)=>(ee(),ve(Io,{"initial-value":{top:90,right:380},class:"z-1"},{default:C(({onRef:f})=>[we("div",ys,[we("div",xs,[R(S(Na),{value:s.value,"onUpdate:value":c[0]||(c[0]=v=>s.value=v)},{default:C(()=>[R(S(Un),null,{default:C(()=>[R(S(Vn),{value:!1},{default:C(()=>[V(" 字符搜索 ")]),_:1}),R(S(Vn),{value:!0},{default:C(()=>[V(" 选择器查询 ")]),_:1})]),_:1})]),_:1},8,["value"]),we("div",{"flex-1":"","cursor-move":"",ref:f},null,512)]),R(S(Oa),null,{default:C(()=>[R(S(Ra),{value:o.value,"onUpdate:value":c[1]||(c[1]=v=>o.value=v),placeholder:"请输入选择器",onKeyup:Zo(S(i),["enter"])},null,8,["value","onKeyup"]),R(S(bn),{onClick:S(i)},{default:C(()=>[V(Ie(s.value?"查询":"搜索"),1)]),_:1},8,["onClick"])]),_:1}),bs,R(S(Ka),null,{default:C(()=>[(ee(!0),lt(Sn,null,wn(S(a),(v,p)=>(ee(),ve(S($a),{key:v.selector.toString(),title:(typeof v.selector=="string"?"字符搜索":"选择器查询")+"："+v.selector.toString()},{"header-extra":C(()=>[V(Ie(v.results.length+"个节点")+" ",1),ms,R(S(bn),{onClick:Jo(h=>S(a).splice(p,1),["stop"])},{default:C(()=>[V(" 删除 ")]),_:2},1032,["onClick"])]),default:C(()=>[R(S(Un),{style:{"max-height":"400px","overflow-y":"scroll","padding-bottom":"10px"}},{default:C(()=>[(ee(!0),lt(Sn,null,wn(v.results,h=>(ee(),ve(S(bn),{key:h.key,onClick:w=>t("update:focusNode",h),size:"small"},{default:C(()=>[V(Ie(h.label),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:1})])]),_:1}))}}),ws={flex:"","flex-col":""},Ss=$({__name:"WindowCard",props:{windowX:{},focusNode:{},skipKeys:{default:()=>[]}},emits:["update:focusNode","update:skipKeys"],setup(e,{emit:t}){const r=e,n=q([]);Me(async()=>{var f;if(!r.focusNode)return;const s=r.focusNode.key;let d=r.focusNode.parent;if(!d)return;const c=new Set(n.value);for(;d;)c.add(d.key),d=d.parent;c.size!=n.value.length&&(n.value=[...c],await $t(),(f=o.value)==null||f.scrollTo({key:s}))});const o=q(),a=(s,d,c)=>{t("update:skipKeys",s)},i=s=>{if(r.skipKeys.includes(s.key))return R("div",{style:{marginLeft:"10px",color:"#ccc"}},[V("已隐藏")])};return(s,d)=>(ee(),lt("div",ws,[R(S(No),{size:"small",striped:"","single-line":!1,class:"table-fixed"},{default:C(()=>[R(S(Ja),null,{default:C(()=>[R(S(zt),null,{default:C(()=>[R(S(He),{class:"w-150px"},{default:C(()=>[V(" Device ")]),_:1}),R(S(He),{class:"w-120px"},{default:C(()=>[V(" Name ")]),_:1}),R(S(He),{class:"w-150px"},{default:C(()=>[V(" AppId ")]),_:1}),R(S(He),null,{default:C(()=>[V(" ActivityId ")]),_:1}),R(S(He),{class:"w-175px"},{default:C(()=>[V(" 操作 ")]),_:1})]),_:1})]),_:1}),R(S(Ro),null,{default:C(()=>[R(S(zt),null,{default:C(()=>[R(S(Ge),{class:"whitespace-nowrap"},{default:C(()=>[V(Ie(`${s.windowX.manufacturer} Android ${s.windowX.release||"13"}`),1)]),_:1}),R(S(Ge),{class:"whitespace-nowrap"},{default:C(()=>[R(S(jt),null,{default:C(()=>[V(Ie(s.windowX.appName),1)]),_:1})]),_:1}),R(S(Ge),{class:"whitespace-nowrap",onClick:d[0]||(d[0]=c=>S(Cn)(s.windowX.appId))},{default:C(()=>[R(S(jt),null,{default:C(()=>[V(Ie(s.windowX.appId),1)]),_:1})]),_:1}),R(S(Ge),{onClick:d[1]||(d[1]=c=>S(Cn)(s.windowX.activityId)),class:"break-words"},{default:C(()=>[R(S(jt),null,{default:C(()=>[V(Ie(s.windowX.activityId),1)]),_:1})]),_:1}),R(S(Ge),null,{default:C(()=>[mo(s.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})]),_:3}),R(S(vi),{ref_key:"treeRef",ref:o,checkable:"","virtual-scroll":"","onUpdate:checkedKeys":a,filter:(c,f)=>{var v;return f.key==((v=s.focusNode)==null?void 0:v.key)},data:[s.windowX.node],"default-expanded-keys":n.value,"default-checked-keys":s.skipKeys,"render-suffix":c=>i(c.option),"node-props":({option:c})=>{var f;return{onClick:()=>{t("update:focusNode",c)},style:{color:c.key==((f=s.focusNode)==null?void 0:f.key)?"#00F":void 0}}}},null,8,["filter","data","default-expanded-keys","default-checked-keys","render-suffix","node-props"])]))}});const _s=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r},Cs=_s(Ss,[["__scopeId","data-v-ebfd7007"]]),Ns={"h-full":"",flex:"","gap-5px":"","p-5px":"","box-border":""},As=$({__name:"SnapshotPage",setup(e){const t=Yo(),r=Qo(),n=B(()=>String(t.params.snapshotId||"")),o=Pe(""),a=Pe();Me(async()=>{const v=await pa.getItem(n.value);if(!v){ke.error("快照数据缺失");return}const p=await ga.getItem(n.value);if(!p){ke.create("截屏数据缺失");return}o.value=URL.createObjectURL(new Blob([p])),a.value=v,i.value=yi(v.nodes.map(h=>({...h,attr:{...h.attr,index:0,depth:0}}))),s.value={...v,node:i.value}});const i=Pe(),s=Pe(),d=Pe(),c=Pe([]),f=async()=>{ke.success("删除成功,即将回到首页"),await ya(2e3),r.replace({path:"/"})};return(v,p)=>(ee(),lt("div",Ns,[o.value?(ee(),ve(wi,{key:0,"skip-keys":c.value,url:o.value,node:i.value,"focus-node":d.value,"onUpdate:focusNode":p[0]||(p[0]=h=>d.value=h)},null,8,["skip-keys","url","node","focus-node"])):gt("",!0),s.value?(ee(),ve(Cs,{key:1,"window-x":s.value,"focus-node":d.value,"onUpdate:focusNode":p[1]||(p[1]=h=>d.value=h),"skip-keys":c.value,"onUpdate:skipKeys":p[2]||(p[2]=h=>c.value=h),class:"flex-1"},{default:C(()=>[a.value?(ee(),ve(zo,{key:0,snapshot:a.value,onDelete:f,"show-preview":!1},null,8,["snapshot"])):gt("",!0)]),_:1},8,["window-x","focus-node","skip-keys"])):gt("",!0),d.value?(ee(),ve(bi,{key:2,"focus-node":d.value},null,8,["focus-node"])):gt("",!0),i.value?(ee(),ve(ks,{key:3,root:i.value,"onUpdate:focusNode":p[3]||(p[3]=h=>d.value=h)},null,8,["root"])):gt("",!0)]))}});export{As as default};
//# sourceMappingURL=SnapshotPage-7581a14b.js.map
