import{d as m,M as f,N as h,s as c,C as d,e as g,x as v,y as w,h as x,t as _,o as y}from"./index-4c2f300b.js";import{t as R}from"./check-44032eaf.js";import{P as S,R as n,Y as i,a as B,Z as l}from"./storage-c5a66d47.js";import{a as I}from"./import-3e481f03.js";import"./file_type-93863fb2.js";const k={class:"h-[calc(100%-10px)]",flex:"","gap-5px":"","p-5px":"","flex-col":"","flex-items-center":""},P=m({__name:"ImportPage",setup(N){const u=f(),s=h(),a=String(u.query.url||""),p=c(!0),o=c("加载中...");return d(async()=>{if(!R(a)){S.error("非法URL参数"),await n(1e3),s.replace({path:"/"});return}await n(1e3);const t=i[a];if(t)if(await B.getItem(t)){s.replace({name:"snapshot",params:{snapshotId:t}});return}else delete i[a];l.start();try{const[e]=await I(a)??[];if(e.status=="fulfilled"){l.finish();const r=e.value;r?(i[a]=r.id,p.value=!1,await n(500),s.replace({name:"snapshot",params:{snapshotId:r.id}})):o.value="获取资源失败"}else throw e.reason}catch{l.error(),o.value="加载资源失败"}}),(t,e)=>(y(),g("div",k,[v(x("div",{"mt-40px":""},_(o.value),513),[[w,p.value]])]))}});export{P as default};
//# sourceMappingURL=ImportPage-e93ddbda.js.map
